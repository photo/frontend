/* 01-bootstrap.min.js */
/**
* Bootstrap.js by @fat & @mdo
* plugins: bootstrap-transition.js, bootstrap-modal.js, bootstrap-dropdown.js, bootstrap-scrollspy.js, bootstrap-tab.js, bootstrap-tooltip.js, bootstrap-popover.js, bootstrap-alert.js, bootstrap-button.js, bootstrap-collapse.js, bootstrap-carousel.js, bootstrap-typeahead.js
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(a){a(function(){a.support.transition=function(){var b=document.body||document.documentElement,c=b.style,d=c.transition!==undefined||c.WebkitTransition!==undefined||c.MozTransition!==undefined||c.MsTransition!==undefined||c.OTransition!==undefined;return d&&{end:function(){var b="TransitionEnd";return a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"),b}()}}()})}(window.jQuery),!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),d.call(b)})}function d(a){this.$element.hide().trigger("hidden"),e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)):b&&b()}function f(){this.$backdrop.remove(),this.$backdrop=null}function g(){var b=this;this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()}):this.isShown||a(document).off("keyup.dismiss.modal")}var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this;if(this.isShown)return;a("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),g.call(this),e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");!b.$element.parent().length&&b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in"),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();if(!this.isShown)return;var e=this;this.isShown=!1,a("body").removeClass("modal-open"),g.call(this),this.$element.trigger("hide").removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({},e.data(),c.data());b.preventDefault(),e.modal(f)})})}(window.jQuery),!function(a){function d(){a(b).parent().removeClass("open")}var b='[data-toggle="dropdown"]',c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),e=c.attr("data-target"),f,g;return e||(e=c.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),f=a(e),f.length||(f=c.parent()),g=f.hasClass("open"),d(),!g&&f.toggleClass("open"),!1}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api",d),a("body").on("click.dropdown.data-api",b,c.prototype.toggle)})}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body").on("click.scroll.data-api",this.selector,d),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){this.targets=this.$body.find(this.selector).map(function(){var b=a(this).attr("href");return/^#\w/.test(b)&&a(b).length?b:null}),this.offsets=a.map(this.targets,function(b){return a(b).position().top})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.offsets,c=this.targets,d=this.activeTarget,e;for(e=b.length;e--;)d!=c[e]&&a>=b[e]&&(!b[e+1]||a<=b[e+1])&&this.activate(c[e])},activate:function(a){var b;this.activeTarget=a,this.$body.find(this.selector).parent(".active").removeClass("active"),b=this.$body.find(this.selector+'[href="'+a+'"]').parent("li").addClass("active"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0],b.trigger({type:"show",relatedTarget:e}),f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})})}(window.jQuery),!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);!c.options.delay||!c.options.delay.show?c.show():(c.hoverState="in",setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show))},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);!c.options.delay||!c.options.delay.hide?c.hide():(c.hoverState="out",setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide))},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip();a.find(".tooltip-inner").html(this.getTitle()),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a=a.toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery),!function(a){var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var b=this.tip(),c=this.getTitle(),d=this.getContent();b.find(".popover-title")[a.type(c)=="object"?"append":"html"](c),b.find(".popover-content > *")[a.type(d)=="object"?"append":"html"](d),b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a=a.toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(a){var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype={constructor:c,close:function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),e.trigger("close"),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger("close").removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()}},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype={constructor:b,setState:function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},toggle:function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")}},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find(".in"),e;d&&d.length&&(e=d.data("collapse"),d.collapse("hide"),e||d.data("collapse",null)),this.$element[b](0),this.transition("addClass","show","shown"),this.$element[b](this.$element[0][c])},hide:function(){var a=this.dimension();this.reset(this.$element[a]()),this.transition("removeClass","hide","hidden"),this.$element[a](0)},reset:function(a){var b=this.dimension();this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element.addClass("collapse")},transition:function(b,c,d){var e=this,f=function(){c=="show"&&e.reset(),e.$element.trigger(d)};this.$element.trigger(c)[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();a(e).collapse(f)})})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.carousel.defaults,c),this.options.slide&&this.slide(this.options.slide)};b.prototype={cycle:function(){return this.interval=setInterval(a.proxy(this.next,this),this.options.interval),this},to:function(b){var c=this.$element.find(".active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(){return clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this;if(!e.length)return;return this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h](),!a.support.transition&&this.$element.hasClass("slide")?(this.$element.trigger("slide"),d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")):(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.trigger("slide"),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})),f&&this.cycle(),this}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=typeof c=="object"&&c;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):typeof c=="string"||(c=f.slide)?e[c]():e.cycle()})},a.fn.carousel.defaults={interval:5e3},a.fn.carousel.Constructor=b,a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!e.data("modal")&&a.extend({},e.data(),c.data());e.carousel(f),b.preventDefault()})})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(a),this.hide()},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c=this,d,e;return this.query=this.$element.val(),this.query?(d=a.grep(this.source,function(a){if(c.matcher(a))return a}),d=this.sorter(d),d.length?this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){return a.replace(new RegExp("("+this.query+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),(a.browser.webkit||a.browser.msie)&&this.$element.on("keydown",a.proxy(this.keypress,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},keyup:function(a){a.stopPropagation(),a.preventDefault();switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:this.hide();break;default:this.lookup()}},keypress:function(a){a.stopPropagation();if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}},blur:function(a){var b=this;a.stopPropagation(),a.preventDefault(),setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},a.fn.typeahead.Constructor=b,a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})})}(window.jQuery);
/* 01a-chosen.jquery.min.js */
(function(){var a;a=function(){function a(){this.options_index=0;this.parsed=[]}a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName?this.add_group(a):this.add_option(a)};a.prototype.add_group=function(a){var e,j,i,l,c,b;e=this.parsed.length;this.parsed.push({array_index:e,group:!0,label:a.label,children:0,disabled:a.disabled});c=a.childNodes;b=[];for(i=0,l=c.length;i<l;i++)j=c[i],b.push(this.add_option(j,e,a.disabled));return b};a.prototype.add_option=function(a,e,j){if("OPTION"===a.nodeName)return""!==
a.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:!0===j?j:a.disabled,group_array_index:e,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};return a}();a.select_to_array=function(e){var d,g,j,i;d=new a;i=e.childNodes;for(g=0,j=i.length;g<j;g++)e=
i[g],d.add_node(e);return d.parsed};this.SelectParser=a}).call(this);
(function(){this.AbstractChosen=function(){function a(a,d){this.form_field=a;this.options=null!=d?d:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()}a.prototype.set_default_values=function(){var a=this;this.click_test_action=function(d){return a.test_active_click(d)};this.activate_action=function(d){return a.activate_field(d)};this.results_showing=this.mouse_on_container=this.active_field=
!1;this.result_single_selected=this.result_highlighted=null;this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.search_contains=this.options.search_contains||!1;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||!1;return this.max_selected_options=this.options.max_selected_options||
Infinity};a.prototype.set_default_text=function(){this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option";return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"};a.prototype.mouse_enter=
function(){return this.mouse_on_container=!0};a.prototype.mouse_leave=function(){return this.mouse_on_container=!1};a.prototype.input_focus=function(){var a=this;if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)};a.prototype.input_blur=function(){var a=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return a.blur_test()},100)};a.prototype.result_add_option=function(a){var d,g;if(a.disabled)return"";a.dom_id=this.container_id+
"_o_"+a.array_index;d=a.selected&&this.is_multiple?[]:["active-result"];a.selected&&d.push("result-selected");null!=a.group_array_index&&d.push("group-option");""!==a.classes&&d.push(a.classes);g=""!==a.style.cssText?' style="'+a.style+'"':"";return'<li id="'+a.dom_id+'" class="'+d.join(" ")+'"'+g+">"+a.html+"</li>"};a.prototype.results_update_field=function(){this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};
a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()};a.prototype.keyup_checker=function(a){var d,g;d=null!=(g=a.which)?g:a.keyCode;this.search_field_scale();switch(d){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();
break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};a.prototype.generate_field_id=function(){var a;a=this.generate_random_id();return this.form_field.id=a};a.prototype.generate_random_char=function(){var a;a=Math.floor(36*Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(a,a+1)};return a}()}).call(this);
(function(){var a,e,d,g,j=Object.prototype.hasOwnProperty,i=function(a,c){function b(){this.constructor=a}for(var h in c)j.call(c,h)&&(a[h]=c[h]);b.prototype=c.prototype;a.prototype=new b;a.__super__=c.prototype;return a};g=this;a=jQuery;a.fn.extend({chosen:function(d){return a.browser.msie&&("6.0"===a.browser.version||"7.0"===a.browser.version)?this:this.each(function(){var c;c=a(this);if(!c.hasClass("chzn-done"))return c.data("chosen",new e(this,d))})}});e=function(e){function c(){c.__super__.constructor.apply(this,
arguments)}i(c,e);c.prototype.setup=function(){this.form_field_jq=a(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};c.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};c.prototype.set_up_html=function(){var b,h;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();b=
a("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):b.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');
this.form_field_jq.hide().after(b);this.container=a("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();b=this.container.height();h=this.f_width-d(this.dropdown);this.dropdown.css({width:h+"px",top:b+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();
this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),b=h-d(this.search_container)-d(this.search_field),this.search_field.css({width:b+"px"}));this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};c.prototype.register_observers=
function(){var b=this;this.container.mousedown(function(a){return b.container_mousedown(a)});this.container.mouseup(function(a){return b.container_mouseup(a)});this.container.mouseenter(function(a){return b.mouse_enter(a)});this.container.mouseleave(function(a){return b.mouse_leave(a)});this.search_results.mouseup(function(a){return b.search_results_mouseup(a)});this.search_results.mouseover(function(a){return b.search_results_mouseover(a)});this.search_results.mouseout(function(a){return b.search_results_mouseout(a)});
this.form_field_jq.bind("liszt:updated",function(a){return b.results_update_field(a)});this.search_field.blur(function(a){return b.input_blur(a)});this.search_field.keyup(function(a){return b.keyup_checker(a)});this.search_field.keydown(function(a){return b.keydown_checker(a)});return this.is_multiple?(this.search_choices.click(function(a){return b.choices_click(a)}),this.search_field.focus(function(a){return b.input_focus(a)})):this.container.click(function(b){return b.preventDefault()})};c.prototype.search_field_disabled=
function(){if(this.is_disabled=this.form_field_jq[0].disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)};c.prototype.container_mousedown=function(b){var h;if(!this.is_disabled){h=null!=b?a(b.target).hasClass("search-choice-close"):
!1;b&&"mousedown"===b.type&&!this.results_showing&&b.stopPropagation();if(!this.pending_destroy_click&&!h){if(this.active_field){if(!this.is_multiple&&b&&(a(b.target)[0]===this.selected_item[0]||a(b.target).parents("a.chzn-single").length))b.preventDefault(),this.results_toggle()}else this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show();return this.activate_field()}return this.pending_destroy_click=!1}};c.prototype.container_mouseup=function(b){if("ABBR"===
b.target.nodeName&&!this.is_disabled)return this.results_reset(b)};c.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};c.prototype.close_field=function(){a(document).unbind("click",this.click_test_action);this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1));this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");
this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};c.prototype.activate_field=function(){!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1));this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};c.prototype.test_active_click=function(b){return a(b.target).parents("#"+
this.container_id).length?this.active_field=!0:this.close_field()};c.prototype.results_build=function(){var b,a,c,d,f;this.parsing=!0;this.results_data=g.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):
this.container.removeClass("chzn-container-single-nosearch"));b="";f=this.results_data;for(c=0,d=f.length;c<d;c++)a=f[c],a.group?b+=this.result_add_group(a):a.empty||(b+=this.result_add_option(a),a.selected&&this.is_multiple?this.choice_build(a):a.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(a.text),this.allow_single_deselect&&this.single_deselect_control_build()));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();
this.search_results.html(b);return this.parsing=!1};c.prototype.result_add_group=function(b){if(b.disabled)return"";b.dom_id=this.container_id+"_g_"+b.array_index;return'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>"};c.prototype.result_do_highlight=function(b){var a,c,d,f;if(b.length){this.result_clear_highlight();this.result_highlight=b;this.result_highlight.addClass("highlighted");c=parseInt(this.search_results.css("maxHeight"),10);f=this.search_results.scrollTop();
d=c+f;a=this.result_highlight.position().top+this.search_results.scrollTop();b=a+this.result_highlight.outerHeight();if(b>=d)return this.search_results.scrollTop(0<b-c?b-c:0);if(a<f)return this.search_results.scrollTop(a)}};c.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};c.prototype.results_show=function(){var b;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",
{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);b=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:b+"px",left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};c.prototype.results_hide=function(){this.is_multiple||
this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=!1};c.prototype.set_tab_index=function(){var b;if(this.form_field_jq.attr("tabindex")){b=this.form_field_jq.attr("tabindex");this.form_field_jq.attr("tabindex",-1);if(this.is_multiple)return this.search_field.attr("tabindex",b);this.selected_item.attr("tabindex",b);return this.search_field.attr("tabindex",
-1)}};c.prototype.show_search_field_default=function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};c.prototype.search_results_mouseup=function(b){var h;h=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(h.length)return this.result_highlight=h,this.result_select(b)};c.prototype.search_results_mouseover=
function(b){if(b=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first())return this.result_do_highlight(b)};c.prototype.search_results_mouseout=function(b){if(a(b.target).hasClass("active-result"))return this.result_clear_highlight()};c.prototype.choices_click=function(b){b.preventDefault();if(this.active_field&&!a(b.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};c.prototype.choice_build=function(b){var h,c=this;if(this.is_multiple&&
this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;h=this.container_id+"_c_"+b.array_index;this.choices+=1;this.search_container.before('<li class="search-choice" id="'+h+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+b.array_index+'"></a></li>');return a("#"+h).find("a").first().click(function(b){return c.choice_destroy_link_click(b)})};c.prototype.choice_destroy_link_click=function(b){b.preventDefault();
if(this.is_disabled)return b.stopPropagation;this.pending_destroy_click=!0;return this.choice_destroy(a(b.target))};c.prototype.choice_destroy=function(b){this.choices-=1;this.show_search_field_default();this.is_multiple&&0<this.choices&&1>this.search_field.val().length&&this.results_hide();this.result_deselect(b.attr("rel"));return b.parents("li").first().remove()};c.prototype.results_reset=function(){this.form_field.options[0].selected=!0;this.selected_item.find("span").text(this.default_text);
this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};c.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()};c.prototype.result_select=function(b){var a,c;if(this.result_highlight)return a=this.result_highlight,c=a.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(a):(this.search_results.find(".result-selected").removeClass("result-selected"),
this.result_single_selected=a,this.selected_item.removeClass("chzn-default")),a.addClass("result-selected"),a=c.substr(c.lastIndexOf("_")+1),a=this.results_data[a],a.selected=!0,this.form_field.options[a.options_index].selected=!0,this.is_multiple?this.choice_build(a):(this.selected_item.find("span").first().text(a.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!b.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==
this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[a.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()};c.prototype.result_activate=function(a){return a.addClass("active-result")};c.prototype.result_deactivate=function(a){return a.removeClass("active-result")};c.prototype.result_deselect=function(b){var c;c=this.results_data[b];c.selected=!1;this.form_field.options[c.options_index].selected=!1;a("#"+this.container_id+
"_o_"+b).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[c.options_index].value});return this.search_field_scale()};c.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&1>this.selected_item.find("abbr").length)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};c.prototype.winnow_results=
function(){var b,c,d,e,f,g,j,i,k,l,m,n,p,q,o;this.no_results_clear();i=0;k=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html();f=RegExp((this.search_contains?"":"^")+k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");l=RegExp(k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");o=this.results_data;for(m=0,p=o.length;m<p;m++)if(c=o[m],!c.disabled&&!c.empty)if(c.group)a("#"+c.dom_id).css("display","none");else if(!this.is_multiple||!c.selected){b=!1;j=
c.dom_id;g=a("#"+j);if(f.test(c.html))b=!0,i+=1;else if(0<=c.html.indexOf(" ")||0===c.html.indexOf("["))if(e=c.html.replace(/\[|\]/g,"").split(" "),e.length)for(n=0,q=e.length;n<q;n++)d=e[n],f.test(d)&&(b=!0,i+=1);b?(k.length?(b=c.html.search(l),d=c.html.substr(0,b+k.length)+"</em>"+c.html.substr(b+k.length),d=d.substr(0,b)+"<em>"+d.substr(b)):d=c.html,g.html(d),this.result_activate(g),null!=c.group_array_index&&a("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&
j===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(g))}return 1>i&&k.length?this.no_results(k):this.winnow_results_set_highlight()};c.prototype.winnow_results_clear=function(){var b,c,d,e,f;this.search_field.val("");c=this.search_results.find("li");f=[];for(d=0,e=c.length;d<e;d++)b=c[d],b=a(b),b.hasClass("group-result")?f.push(b.css("display","auto")):!this.is_multiple||!b.hasClass("result-selected")?f.push(this.result_activate(b)):f.push(void 0);return f};
c.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[],a=a.length?a.first():this.search_results.find(".active-result").first(),null!=a))return this.result_do_highlight(a)};c.prototype.no_results=function(b){var c;c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');c.find("span").first().html(b);return this.search_results.append(c)};c.prototype.no_results_clear=
function(){return this.search_results.find(".no-results").remove()};c.prototype.keydown_arrow=function(){var b;this.result_highlight?this.results_showing&&(b=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(b):(b=this.search_results.find("li.active-result").first())&&this.result_do_highlight(a(b));if(!this.results_showing)return this.results_show()};c.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=
this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};c.prototype.keydown_backstroke=function(){if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();this.pending_backstroke=this.search_container.siblings("li.search-choice").last();return this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};
c.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};c.prototype.keydown_checker=function(a){var c,d;c=null!=(d=a.which)?d:a.keyCode;this.search_field_scale();8!==c&&this.pending_backstroke&&this.clear_backstroke();switch(c){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;
case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};c.prototype.search_field_scale=function(){var b,c,d,e,f;if(this.is_multiple){c="position:absolute; left: -1000px; top: -1000px; display:none;";d="font-size,font-style,font-weight,font-family,line-height,text-transform,letter-spacing".split(",");for(e=0,f=d.length;e<f;e++)b=d[e],c+=b+":"+this.search_field.css(b)+";";b=a("<div />",{style:c});b.text(this.search_field.val());a("body").append(b);
c=b.width()+25;b.remove();c>this.f_width-10&&(c=this.f_width-10);this.search_field.css({width:c+"px"});b=this.container.height();return this.dropdown.css({top:b+"px"})}};c.prototype.generate_random_id=function(){var b;for(b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();0<a("#"+b).length;)b+=this.generate_random_char();return b};return c}(AbstractChosen);d=function(a){return a.outerWidth()-a.width()};g.get_side_border_padding=d}).call(this);
/* 02-bootstrap-modal.min.js */
!function(b){function k(){var a=this,c=setTimeout(function(){a.$element.off(b.support.transition.end);g.call(a)},500);this.$element.one(b.support.transition.end,function(){clearTimeout(c);g.call(a)})}function g(){this.$element.hide().trigger("hidden");h.call(this)}function h(a){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=b.support.transition&&c;this.$backdrop=b('<div class="modal-backdrop '+c+'" />').appendTo(document.body);"static"!=this.options.backdrop&&
this.$backdrop.click(b.proxy(this.hide,this));d&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");d?this.$backdrop.one(b.support.transition.end,a):a()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b.support.transition.end,b.proxy(i,this)):i.call(this)):a&&a()}function i(){this.$backdrop.remove();this.$backdrop=null}function j(){var a=this;if(this.isShown&&this.options.keyboard)b(document).on("keyup.dismiss.modal",
function(b){27==b.which&&a.hide()});else this.isShown||b(document).off("keyup.dismiss.modal")}var f=function(a,c){this.options=c;this.$element=b(a).delegate('[data-dismiss="modal"]',"click.dismiss.modal",b.proxy(this.hide,this))};f.prototype={constructor:f,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var a=this;this.isShown||(b("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),j.call(this),h.call(this,function(){var c=b.support.transition&&
a.$element.hasClass("fade");!a.$element.parent().length&&a.$element.appendTo(document.body);a.$element.show();c&&a.$element[0].offsetWidth;a.$element.addClass("in");c?a.$element.one(b.support.transition.end,function(){a.$element.trigger("shown")}):a.$element.trigger("shown")}))},hide:function(a){a&&a.preventDefault();this.isShown&&(this.isShown=!1,b("body").removeClass("modal-open"),j.call(this),this.$element.trigger("hide").removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?k.call(this):
g.call(this))}};b.fn.modal=function(a){return this.each(function(){var c=b(this),d=c.data("modal"),e=b.extend({},b.fn.modal.defaults,c.data(),"object"==typeof a&&a);d||c.data("modal",d=new f(this,e));if("string"==typeof a)d[a]();else e.show&&d.show()})};b.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};b.fn.modal.Constructor=f;b(function(){b("body").on("click.modal.data-api",'[data-toggle="modal"]',function(a){var c=b(this),d,e=b(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,
"")),c=e.data("modal")?"toggle":b.extend({},e.data(),c.data());a.preventDefault();e.modal(c)})})}(window.jQuery);
/* 05-gallery.min.js */
var Gallery=function(i){var g=0,o=null,k={thumbnailSize:"960x180",marginsOfImage:6,defaultWidthValue:120,defaultHeightValue:120},j=function(b,a){return void 0===typeof b||null==b?a:b},p=function(b){var a=i("<div/>"),e=i("<a/>");a.attr("class","date-placeholder");e.html('<i class="icon-calendar icon-large""></i> '+phpjs.date("M jS, Y",b));a.append(e);return a},q=function(b){var a={href:b},b=b.replace("//","/").split("/");a.protocol=b[0];a.host=b[1];b[1]=b[1].split(":");a.hostname=b[1][0];a.port=1<
b[1].length?b[1][1]:"";b.splice(0,2);a.pathname="/"+b.join("/");a.pathname=a.pathname.split("#");a.hash=1<a.pathname.length?"#"+a.pathname[1]:"";a.pathname=a.pathname[0];a.pathname=a.pathname.split("?");a.search=1<a.pathname.length?"?"+a.pathname[1]:"";a.pathname=a.pathname[0];return a},r=function(b,a){var e=[],c=0,h="photo"+k.thumbnailSize;0<g&&(b=g);g=b;for(var l=k.marginsOfImage;0<a.length&&c<b;){var d=a.shift();e.push(d);c+=d[h][1]+l}d=c-b;if(0<e.length&&0<d){var i=c,c=[],n=0,m="photo"+k.thumbnailSize,
f;for(f in e)c[f]=Math.floor(e[f][m][1]/i*d),n+=c[f];for(d-=n;0<d;)for(f in c)if(c[f]++,d--,0==d)break;for(var j in e)f=c[j],d=e[j],d.vx=Math.floor(f/2),d.vwidth=d[h][1]-f,g-=d.vwidth+l}else for(j in e)d=e[j],d.vx=0,d.vwidth=d[h][1],g-=d.vwidth+l;return e},s=function(b,a){var e=opTheme.init.pages.photos,c=e.pageLocation.search.replace(/(page|returnSizes)=[^&?]+\&?/g,""),h=i('<div class="imageContainer"/>'),l=new Date(1E3*a.dateTaken),d="path"+k.thumbnailSize,g=k.defaultWidthValue,n=k.defaultHeightValue,
m=i("<div/>");m.css("width",""+j(a.vwidth,g)+"px");m.css("height",""+j(a[d][1],n)+"px");m.css("overflow","hidden");var f=q(a.url);null!==e.filterOpts&&0<e.filterOpts.length&&(f.pathname=0===c.length?f.pathname+"/"+e.filterOpts:f.pathname.replace("?","/"+e.filterOpts+"?"));e=i("<a/>");e.attr("href",f.pathname+c);c=i("<img/>");c.attr("src",a[d]);c.attr("class","photo-view-modal-click");c.attr("title",a.title);c.css("width",""+j(a[d][1],g)+"px");c.css("height",""+j(a[d][2],n)+"px");c.css("margin-left",
""+(a.vx?-a.vx:0)+"px");c.css("margin-top","0px");c.hide();e.append(c);m.append(e);h.append(m);currentDate=l.getYear()+"-"+l.getMonth()+"-"+l.getDay();currentDate!==o&&h.prepend(p(a.dateTaken));o=currentDate;c.bind("load",function(){i(this).fadeIn(400)});b.append(h);return parseInt(h.width())};return{setConfig:function(b,a){k[b]=a},showImages:function(b,a){for(var e=b.width()-1,c=a.slice(),h=[];0<c.length;)h.push(r(e,c));for(var g in h)for(var d in h[g])s(b,h[g][d])}}}(jQuery);
/* 06-jquery.history.min.js */
window.JSON||(window.JSON={});
(function(){function c(b){return 10>b?"0"+b:b}function m(b){return f.lastIndex=0,f.test(b)?'"'+b.replace(f,function(b){var a=k[b];return"string"==typeof a?a:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function j(b,i){var a,c,f,k,h=g,e,d=i[b];d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(b));"function"==typeof n&&(d=n.call(i,b,d));switch(typeof d){case "string":return m(d);case "number":return isFinite(d)?""+d:"null";case "boolean":case "null":return""+d;
case "object":if(!d)return"null";g+=o;e=[];if("[object Array]"===Object.prototype.toString.apply(d)){k=d.length;for(a=0;a<k;a+=1)e[a]=j(a,d)||"null";return f=0===e.length?"[]":g?"[\n"+g+e.join(",\n"+g)+"\n"+h+"]":"["+e.join(",")+"]",g=h,f}if(n&&"object"==typeof n){k=n.length;for(a=0;a<k;a+=1)c=n[a],"string"==typeof c&&(f=j(c,d),f&&e.push(m(c)+(g?": ":":")+f))}else for(c in d)Object.hasOwnProperty.call(d,c)&&(f=j(c,d),f&&e.push(m(c)+(g?": ":":")+f));return f=0===e.length?"{}":g?"{\n"+g+e.join(",\n"+
g)+"\n"+h+"}":"{"+e.join(",")+"}",g=h,f}}"use strict";"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=window.JSON,i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,o,k={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!=typeof b.stringify&&(b.stringify=function(b,i,a){var c;g="";o="";if("number"==typeof a)for(c=0;c<a;c+=1)o+=" ";else"string"==typeof a&&(o=a);n=i;if(!i||"function"==typeof i||"object"==typeof i&&"number"==typeof i.length)return j("",{"":b});throw Error("JSON.stringify");
});"function"!=typeof b.parse&&(b.parse=function(b,c){function a(b,i){var h,e,d=b[i];if(d&&"object"==typeof d)for(h in d)Object.hasOwnProperty.call(d,h)&&(e=a(d,h),void 0!==e?d[h]=e:delete d[h]);return c.call(b,i,d)}var f;b=""+b;i.lastIndex=0;i.test(b)&&(b=b.replace(i,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return f=eval("("+b+")"),"function"==typeof c?a({"":f},""):f;throw new SyntaxError("JSON.parse");})})();(function(c,m){var j=c.History=c.History||{},b=c.jQuery;if("undefined"!=typeof j.Adapter)throw Error("History.js Adapter has already been loaded...");j.Adapter={bind:function(i,c,g){b(i).bind(c,g)},trigger:function(c,f,g){b(c).trigger(f,g)},extractEventData:function(b,c,g){return c&&c.originalEvent&&c.originalEvent[b]||g&&g[b]||m},onDomLoad:function(c){b(c)}};"undefined"!=typeof j.init&&j.init()})(window);
(function(c){var m=c.document,j=c.setInterval||j,b=c.History=c.History||{};if("undefined"!=typeof b.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");b.initHtml4=function(){if("undefined"!=typeof b.initHtml4.initialized)return!1;b.initHtml4.initialized=!0;b.enabled=!0;b.savedHashes=[];b.isLastHash=function(c){var f=b.getHashByIndex(),g;return g=c===f,g};b.saveHash=function(c){return b.isLastHash(c)?!1:(b.savedHashes.push(c),!0)};b.getHashByIndex=function(b){return null};
b.discardedHashes={};b.discardedStates={};b.discardState=function(c,f,g){var j=b.getHashByState(c),k;return k={discardedState:c,backState:g,forwardState:f},b.discardedStates[j]=k,!0};b.discardHash=function(c,f,g){return b.discardedHashes[c]={discardedHash:c,backState:g,forwardState:f},!0};b.discardedState=function(c){var c=b.getHashByState(c),f;return f=b.discardedStates[c]||!1,f};b.discardedHash=function(c){return b.discardedHashes[c]||!1};b.recycleState=function(c){var f=b.getHashByState(c);return b.discardedState(c)&&
delete b.discardedStates[f],!0};b.emulated.hashChange&&(b.hashChangeInit=function(){b.checkerFunction=null;var i="",f,g,o;return b.isInternetExplorer()?(f=m.createElement("iframe"),f.setAttribute("id","historyjs-iframe"),f.style.display="none",m.body.appendChild(f),f.contentWindow.document.open(),f.contentWindow.document.close(),g="",o=!1,b.checkerFunction=function(){if(o)return!1;o=!0;var k=b.getHash()||"",j=b.unescapeHash(f.contentWindow.document.location.hash)||"";return k!==i?(i=k,j!==k&&(g=k,
f.contentWindow.document.open(),f.contentWindow.document.close(),f.contentWindow.document.location.hash=b.escapeHash(k)),b.Adapter.trigger(c,"hashchange")):j!==g&&(g=j,b.setHash(j,!1)),o=!1,!0}):b.checkerFunction=function(){var f=b.getHash();return f!==i&&(i=f,b.Adapter.trigger(c,"hashchange")),!0},b.intervalList.push(j(b.checkerFunction,b.options.hashChangeInterval)),!0},b.Adapter.onDomLoad(b.hashChangeInit));b.emulated.pushState&&(b.onHashChange=function(i){var i=b.getHashByUrl(i&&i.newURL||m.location.href),
f=null,g;return b.isLastHash(i)?(b.busy(!1),!1):(b.doubleCheckComplete(),b.saveHash(i),i&&b.isTraditionalAnchor(i)?(b.Adapter.trigger(c,"anchorchange"),b.busy(!1),!1):(f=b.extractState(b.getFullUrl(i||m.location.href,!1),!0),b.isLastSavedState(f)?(b.busy(!1),!1):(b.getHashByState(f),g=b.discardedState(f),g?(b.getHashByIndex(-2)===b.getHashByState(g.forwardState)?b.back(!1):b.forward(!1),!1):(b.pushState(f.data,f.title,f.url,!1),!0))))},b.Adapter.bind(c,"hashchange",b.onHashChange),b.pushState=function(i,
f,g,j){if(b.getHashByUrl(g))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==j&&b.busy())return b.pushQueue({scope:b,callback:b.pushState,args:arguments,queue:j}),!1;b.busy(!0);var k=b.createStateObject(i,f,g),n=b.getHashByState(k),l=b.getState(!1),l=b.getHashByState(l),q=b.getHash();return b.storeState(k),b.expectedStateId=k.id,b.recycleState(k),b.setTitle(k),n===l?(b.busy(!1),!1):n!==q&&n!==b.getShortUrl(m.location.href)?(b.setHash(n,!1),!1):
(b.saveState(k),b.Adapter.trigger(c,"statechange"),b.busy(!1),!0)},b.replaceState=function(c,f,g,j){if(b.getHashByUrl(g))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==j&&b.busy())return b.pushQueue({scope:b,callback:b.replaceState,args:arguments,queue:j}),!1;b.busy(!0);var k=b.createStateObject(c,f,g),m=b.getState(!1),l=b.getStateByIndex(-2);return b.discardState(m,k,l),b.pushState(k.data,k.title,k.url,!1),!0});b.emulated.pushState&&b.getHash()&&
!b.emulated.hashChange&&b.Adapter.onDomLoad(function(){b.Adapter.trigger(c,"hashchange")})};"undefined"!=typeof b.init&&b.init()})(window);
(function(c,m){var j=c.console||m,b=c.document,i=c.navigator,f=c.sessionStorage||!1,g=c.setTimeout,o=c.clearTimeout,k=c.setInterval,n=c.clearInterval,l=c.JSON,q=c.alert,a=c.History=c.History||{},p=c.history;l.stringify=l.stringify||l.encode;l.parse=l.parse||l.decode;if("undefined"!=typeof a.init)throw Error("History.js Core has already been loaded...");a.init=function(){return"undefined"==typeof a.Adapter?!1:("undefined"!=typeof a.initCore&&a.initCore(),"undefined"!=typeof a.initHtml4&&a.initHtml4(),
!0)};a.initCore=function(){if("undefined"!=typeof a.initCore.initialized)return!1;a.initCore.initialized=!0;a.options=a.options||{};a.options.hashChangeInterval=a.options.hashChangeInterval||100;a.options.safariPollInterval=a.options.safariPollInterval||500;a.options.doubleCheckInterval=a.options.doubleCheckInterval||500;a.options.storeInterval=a.options.storeInterval||1E3;a.options.busyDelay=a.options.busyDelay||250;a.options.debug=a.options.debug||!1;a.options.initialTitle=a.options.initialTitle||
b.title;a.intervalList=[];a.clearAllIntervals=function(){var h,b=a.intervalList;if("undefined"!=typeof b&&null!==b){for(h=0;h<b.length;h++)n(b[h]);a.intervalList=null}};a.debug=function(){a.options.debug&&a.log.apply(a,arguments)};a.log=function(){var a="undefined"!=typeof j&&"undefined"!=typeof j.log&&"undefined"!=typeof j.log.apply,e=b.getElementById("log"),d,c,f,g;a?(c=Array.prototype.slice.call(arguments),d=c.shift(),"undefined"!=typeof j.debug?j.debug.apply(j,[d,c]):j.log.apply(j,[d,c])):d="\njmathai\n";
for(c=1,f=arguments.length;c<f;++c){g=arguments[c];if("object"==typeof g&&"undefined"!=typeof l)try{g=l.stringify(g)}catch(i){}d+="\n"+g+"\n"}return e?(e.value+=d+"\n-----\n",e.scrollTop=e.scrollHeight-e.clientHeight):a||q(d),!0};a.getInternetExplorerMajorVersion=function(){var h=a.getInternetExplorerMajorVersion,e;if("undefined"!=typeof a.getInternetExplorerMajorVersion.cached)e=a.getInternetExplorerMajorVersion.cached;else{e=3;for(var d=b.createElement("div"),c=d.getElementsByTagName("i");(d.innerHTML=
"<\!--[if gt IE "+ ++e+"]><i></i><![endif]--\>")&&c[0];);e=4<e?e:!1}return h.cached=e};a.isInternetExplorer=function(){return a.isInternetExplorer.cached="undefined"!=typeof a.isInternetExplorer.cached?a.isInternetExplorer.cached:Boolean(a.getInternetExplorerMajorVersion())};a.emulated={pushState:!Boolean(c.history&&c.history.pushState&&c.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in
c||"onhashchange"in b)||a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion())};a.enabled=!a.emulated.pushState;a.bugs={setHash:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion()),hashEscape:Boolean(a.isInternetExplorer()&&
7>a.getInternetExplorerMajorVersion())};a.isEmptyObject=function(a){for(var b in a)return!1;return!0};a.cloneObject=function(a){var b,d;return a?(b=l.stringify(a),d=l.parse(b)):d={},d};a.getRootUrl=function(){var a=b.location.protocol+"//"+(b.location.hostname||b.location.host);b.location.port&&(a+=":"+b.location.port);return a+="/",a};a.getBaseHref=function(){var a=b.getElementsByTagName("base"),e="";return 1===a.length&&(e=null.href.replace(/[^\/]+$/,"")),e=e.replace(/\/+$/,""),e&&(e+="/"),e};a.getBaseUrl=
function(){return a.getBaseHref()||a.getBasePageUrl()||a.getRootUrl()};a.getPageUrl=function(){var h;return h=((a.getState(!1,!1)||{}).url||b.location.href).replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"}),h};a.getBasePageUrl=function(){return b.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};a.getFullUrl=function(h,b){var d=h,c=h.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(h)||
("/"===c?d=a.getRootUrl()+h.replace(/^\/+/,""):"#"===c?d=a.getPageUrl().replace(/#.*/,"")+h:"?"===c?d=a.getPageUrl().replace(/[\?#].*/,"")+h:b?d=a.getBaseUrl()+h.replace(/^(\.\/)+/,""):d=a.getBasePageUrl()+h.replace(/^(\.\/)+/,"")),d.replace(/\#$/,"")};a.getShortUrl=function(h){var b=a.getBaseUrl(),d=a.getRootUrl();return a.emulated.pushState&&(h=h.replace(b,"")),h=h.replace(d,"/"),a.isTraditionalAnchor(h)&&(h="./"+h),h=h.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),h};a.store={};a.idToState=a.idToState||
{};a.stateToId=a.stateToId||{};a.urlToId=a.urlToId||{};a.storedStates=a.storedStates||[];a.savedStates=a.savedStates||[];a.normalizeStore=function(){a.store.idToState=a.store.idToState||{};a.store.urlToId=a.store.urlToId||{};a.store.stateToId=a.store.stateToId||{}};a.getState=function(h,b){"undefined"==typeof h&&(h=!0);"undefined"==typeof b&&(b=!0);var d=a.getLastSavedState();return!d&&b&&(d=a.createStateObject()),h&&(d=a.cloneObject(d),d.url=d.cleanUrl||d.url),d};a.getIdByState=function(b){var e=
a.extractId(b.url),d;if(!e)if(d=a.getStateString(b),"undefined"!=typeof a.stateToId[d])e=a.stateToId[d];else if("undefined"!=typeof a.store.stateToId[d])e=a.store.stateToId[d];else{for(;!(e=(new Date).getTime()+(""+Math.random()).replace(/\D/g,""),"undefined"==typeof a.idToState[e]&&"undefined"==typeof a.store.idToState[e]););a.stateToId[d]=e;a.idToState[e]=b}return e};a.normalizeState=function(h){var e;if(!h||"object"!=typeof h)h={};if("undefined"!=typeof h.normalized)return h;if(!h.data||"object"!=
typeof h.data)h.data={};e={};e.normalized=!0;e.title=h.title||"";e.url=a.getFullUrl(a.unescapeString(h.url||b.location.href));e.hash=a.getShortUrl(e.url);e.data=a.cloneObject(h.data);e.id=a.getIdByState(e);e.cleanUrl=e.url.replace(/\??\&_suid.*/,"");e.url=e.cleanUrl;h=!a.isEmptyObject(e.data);if(e.title||h)e.hash=a.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id;return e.hashedUrl=a.getFullUrl(e.hash),(a.emulated.pushState||a.bugs.safariPoll)&&
a.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e};a.createStateObject=function(b,e,d){b={data:b,title:e,url:d};return b=a.normalizeState(b),b};a.getStateById=function(b){b=""+b;return a.idToState[b]||a.store.idToState[b]||m};a.getStateString=function(b){var e,d,c;return e=a.normalizeState(b),d={data:e.data,title:b.title,url:b.url},c=l.stringify(d),c};a.getStateId=function(b){var e,d;return e=a.normalizeState(b),d=e.id,d};a.getHashByState=function(b){var e,d;return e=a.normalizeState(b),d=e.hash,d};a.extractId=
function(a){var b,d;return d=/(.*)\&_suid=([0-9]+)$/.exec(a),b=d?""+(d[2]||""):"",b||!1};a.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};a.extractState=function(b,e){var d=null,c,f;return e=e||!1,c=a.extractId(b),c&&(d=a.getStateById(c)),d||(f=a.getFullUrl(b),c=a.getIdByUrl(f)||!1,c&&(d=a.getStateById(c)),!d&&e&&!a.isTraditionalAnchor(b)&&(d=a.createStateObject(null,null,f))),d};a.getIdByUrl=function(b){return a.urlToId[b]||a.store.urlToId[b]||m};a.getLastSavedState=function(){return a.savedStates[a.savedStates.length-
1]||m};a.getLastStoredState=function(){return a.storedStates[a.storedStates.length-1]||m};a.hasUrlDuplicate=function(b){var e=!1,d;return d=a.extractState(b.url),e=d&&d.id!==b.id,e};a.storeState=function(b){return a.urlToId[b.url]=b.id,a.storedStates.push(a.cloneObject(b)),b};a.isLastSavedState=function(){return a.savedStates.length&&a.getLastSavedState(),!1};a.saveState=function(b){return a.isLastSavedState(b)?!1:(a.savedStates.push(a.cloneObject(b)),!0)};a.getStateByIndex=function(a){return null};
a.getHash=function(){return a.unescapeHash(b.location.hash)};a.unescapeString=function(a){for(var b;;){b=c.unescape(a);if(b===a)break;a=b}return a};a.unescapeHash=function(b){b=a.normalizeHash(b);return b=a.unescapeString(b),b};a.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};a.setHash=function(h,e){var d,c,f;return!1!==e&&a.busy()?(a.pushQueue({scope:a,callback:a.setHash,args:arguments,queue:e}),!1):(d=a.escapeHash(h),a.busy(!0),c=a.extractState(h,!0),c&&!a.emulated.pushState?
a.pushState(c.data,c.title,c.url,!1):b.location.hash!==d&&(a.bugs.setHash?(f=a.getPageUrl(),a.pushState(null,null,f+"#"+d,!1)):b.location.hash=d),a)};a.escapeHash=function(b){b=a.normalizeHash(b);return b=c.escape(b),a.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),b};a.getHashByUrl=function(b){b=(""+b).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=a.unescapeHash(b),b};a.setTitle=function(c){var e=c.title,d;e||(d=a.getStateByIndex(0),d&&
d.url===c.url&&(e=d.title||a.options.initialTitle));try{b.getElementsByTagName("title")[0].innerHTML=e.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(f){}return b.title=e,a};a.queues=[];a.busy=function(b){"undefined"!=typeof b?a.busy.flag=b:"undefined"==typeof a.busy.flag&&(a.busy.flag=!1);if(!a.busy.flag){o(a.busy.timeout);var c=function(){var b,h,f;if(!a.busy.flag)for(b=a.queues.length-1;0<=b;--b)h=a.queues[b],0!==h.length&&(f=h.shift(),a.fireQueueItem(f),a.busy.timeout=
g(c,a.options.busyDelay))};a.busy.timeout=g(c,a.options.busyDelay)}return a.busy.flag};a.busy.flag=!1;a.fireQueueItem=function(b){return b.callback.apply(b.scope||a,b.args||[])};a.pushQueue=function(b){return a.queues[b.queue||0]=a.queues[b.queue||0]||[],a.queues[b.queue||0].push(b),a};a.queue=function(b,c){return"function"==typeof b&&(b={callback:b}),"undefined"!=typeof c&&(b.queue=c),a.busy()?a.pushQueue(b):a.fireQueueItem(b),a};a.clearQueue=function(){return a.busy.flag=!1,a.queues=[],a};a.stateChanged=
!1;a.doubleChecker=!1;a.doubleCheckComplete=function(){return a.stateChanged=!0,a.doubleCheckClear(),a};a.doubleCheckClear=function(){return a.doubleChecker&&(o(a.doubleChecker),a.doubleChecker=!1),a};a.doubleCheck=function(b){return a.stateChanged=!1,a.doubleCheckClear(),a.bugs.ieDoubleCheck&&(a.doubleChecker=g(function(){return a.doubleCheckClear(),a.stateChanged||b(),!0},a.options.doubleCheckInterval)),a};a.safariStatePoll=function(){var h=a.extractState(b.location.href);if(!a.isLastSavedState(h))return h||
a.createStateObject(),a.Adapter.trigger(c,"popstate"),a};a.back=function(b){return!1!==b&&a.busy()?(a.pushQueue({scope:a,callback:a.back,args:arguments,queue:b}),!1):(a.busy(!0),a.doubleCheck(function(){a.back(!1)}),p.go(-1),!0)};a.forward=function(b){return!1!==b&&a.busy()?(a.pushQueue({scope:a,callback:a.forward,args:arguments,queue:b}),!1):(a.busy(!0),a.doubleCheck(function(){a.forward(!1)}),p.go(1),!0)};a.go=function(b,c){var d;if(0<b)for(d=1;d<=b;++d)a.forward(c);else{if(!(0>b))throw Error("History.go: History.go requires a positive or negative integer passed.");
for(d=-1;d>=b;--d)a.back(c)}return a};if(a.emulated.pushState){var r=function(){};a.pushState=a.pushState||r;a.replaceState=a.replaceState||r}else a.onPopState=function(h,e){var d=!1,f=!1,g,i;return a.doubleCheckComplete(),g=a.getHash(),g?(i=a.extractState(g||b.location.href,!0),i?a.replaceState(i.data,i.title,i.url,!1):(a.Adapter.trigger(c,"anchorchange"),a.busy(!1)),a.expectedStateId=!1,!1):(d=a.Adapter.extractEventData("state",h,e)||!1,d?f=a.getStateById(d):a.expectedStateId?f=a.getStateById(a.expectedStateId):
f=a.extractState(b.location.href),f||(f=a.createStateObject(null,null,b.location.href)),a.expectedStateId=!1,a.isLastSavedState(f)?(a.busy(!1),!1):(a.storeState(f),a.saveState(f),a.setTitle(f),a.Adapter.trigger(c,"statechange"),a.busy(!1),!0))},a.Adapter.bind(c,"popstate",a.onPopState),a.pushState=function(b,e,d,f){if(a.getHashByUrl(d)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&a.busy())return a.pushQueue({scope:a,
callback:a.pushState,args:arguments,queue:f}),!1;a.busy(!0);var g=a.createStateObject(b,e,d);return a.isLastSavedState(g)?a.busy(!1):(a.storeState(g),a.expectedStateId=g.id,p.pushState(g.id,g.title,g.url),a.Adapter.trigger(c,"popstate")),!0},a.replaceState=function(b,e,d,f){if(a.getHashByUrl(d)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:f}),
!1;a.busy(!0);var g=a.createStateObject(b,e,d);return a.isLastSavedState(g)?a.busy(!1):(a.storeState(g),a.expectedStateId=g.id,p.replaceState(g.id,g.title,g.url),a.Adapter.trigger(c,"popstate")),!0};if(f){try{a.store=l.parse(f.getItem("History.store"))||{}}catch(s){a.store={}}a.normalizeStore()}else a.store={},a.normalizeStore();a.Adapter.bind(c,"beforeunload",a.clearAllIntervals);a.Adapter.bind(c,"unload",a.clearAllIntervals);a.saveState(a.storeState(a.extractState(b.location.href,!0)));f&&(a.onUnload=
function(){var b,c;try{b=l.parse(f.getItem("History.store"))||{}}catch(d){b={}}b.idToState=b.idToState||{};b.urlToId=b.urlToId||{};b.stateToId=b.stateToId||{};for(c in a.idToState)a.idToState.hasOwnProperty(c)&&(b.idToState[c]=a.idToState[c]);for(c in a.urlToId)a.urlToId.hasOwnProperty(c)&&(b.urlToId[c]=a.urlToId[c]);for(c in a.stateToId)a.stateToId.hasOwnProperty(c)&&(b.stateToId[c]=a.stateToId[c]);a.store=b;a.normalizeStore();f.setItem("History.store",l.stringify(b))},a.intervalList.push(k(a.onUnload,
a.options.storeInterval)),a.Adapter.bind(c,"beforeunload",a.onUnload),a.Adapter.bind(c,"unload",a.onUnload));if(!a.emulated.pushState&&(a.bugs.safariPoll&&a.intervalList.push(k(a.safariStatePoll,a.options.safariPollInterval)),"Apple Computer, Inc."===i.vendor||"Mozilla"===(i.appCodeName||"")))a.Adapter.bind(c,"hashchange",function(){a.Adapter.trigger(c,"popstate")}),a.getHash()&&a.Adapter.onDomLoad(function(){a.Adapter.trigger(c,"hashchange")})};a.init()})(window);
/* 07-jquery.scrollTo.min.js */
(function(c){function h(b){return"object"==typeof b?b:{top:b,left:b}}var l=c.scrollTo=function(b,d,a){c(window).scrollTo(b,d,a)};l.defaults={axis:"xy",duration:1.3<=parseFloat(c.fn.jquery)?0:1};l.window=function(){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==c.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return c.browser.safari||
"BackCompat"==b.compatMode?b.body:b.documentElement})};c.fn.scrollTo=function(b,d,a){"object"==typeof d&&(a=d,d=0);"function"==typeof a&&(a={onAfter:a});"max"==b&&(b=9E9);a=c.extend({},l.defaults,a);d=d||a.speed||a.duration;a.queue=a.queue&&1<a.axis.length;a.queue&&(d/=2);a.offset=h(a.offset);a.over=h(a.over);return this._scrollable().each(function(){function n(c){i.animate(e,d,a.easing,c&&function(){c.call(this,b,a)})}var j=this,i=c(j),g=b,m,e={},p=i.is("html,body");switch(typeof g){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(g)){g=
h(g);break}g=c(g,this);case "object":if(g.is||g.style)m=(g=c(g)).offset()}c.each(a.axis.split(""),function(b,c){var d="x"==c?"Left":"Top",k=d.toLowerCase(),f="scroll"+d,h=j[f],o=l.max(j,c);m?(e[f]=m[k]+(p?0:h-i.offset()[k]),a.margin&&(e[f]-=parseInt(g.css("margin"+d))||0,e[f]-=parseInt(g.css("border"+d+"Width"))||0),e[f]+=a.offset[k]||0,a.over[k]&&(e[f]+=g["x"==c?"width":"height"]()*a.over[k])):(d=g[k],e[f]=d.slice&&"%"==d.slice(-1)?parseFloat(d)/100*o:d);/^\d+$/.test(e[f])&&(e[f]=0>=e[f]?0:Math.min(e[f],
o));!b&&a.queue&&(h!=e[f]&&n(a.onAfterFirst),delete e[f])});n(a.onAfter)}).end()};l.max=function(b,d){var a="x"==d?"Width":"Height",h="scroll"+a;if(!c(b).is("html,body"))return b[h]-c(b)[a.toLowerCase()]();var a="client"+a,j=b.ownerDocument.documentElement,i=b.ownerDocument.body;return Math.max(j[h],i[h])-Math.min(j[a],i[a])}})(jQuery);
/* 08-openphoto-theme.min.js */
var opTheme=function(){var g,j,h,f,l,k;g=function(){var a=null;return{get:function(){return a},set:function(b){a=b}}}();j=function(a){"undefined"!==typeof console&&"undefined"!==typeof console.log&&console.log(a)};h={message:function(a){var b="";1<arguments.length&&("error"==arguments[1]?b="error":"confirm"==arguments[1]&&(b="success"));return'<div class="alert-message block-message '+b+'"><a class="modal-close-click close" href="#">x</a>'+a+"</div>"},modal:function(a,b,c){return'<div class="modal-header">  <a href="#" class="close" data-dismiss="modal">&times;</a>  <h3>'+
a+'</h3></div><div class="modal-body">  <p>'+b+"</p></div>"+(c?'<div class="modal-footer">'+c+"</div>":"")}};f=function(){return{clickHandler:function(a){var b=$(a.currentTarget).attr("href");if(History.enabled&&-1==b.search("#")&&(null===b.match(/^http/)||-1!=b.search(document.location.hostname)))a.preventDefault(),get(b)},get:function(a){f.url=a;$.get(f.url,f.store)},replace:function(a,b){var c=b||{};c.type="replace";History.replaceState(c,"",a)},insert:function(a,b){var c=b||{};c.type="insert";
History.pushState(c,"",a)},parse:function(a){var b=$(a),a=$("body",b).attr("class"),b=$(".content",b).html();return{bodyClass:a,content:b}},render:function(a){"replace"===a.type?$(".modal").modal("hide"):void 0!==a.content&&$("undefined"===typeof a.bodyClass||"photo-details"===a.bodyClass?"#modal-photo-detail":".content").fadeTo("fast",0.25,function(){$(this).html(a.content).fadeTo("fast",1)})},store:function(a){a=f.parse(a||{});a.type="store";History.pushState(a,"",f.url)}}}();k=function(){return{getDeviceWidth:function(){return $(window).width()},
fetchAndCache:function(a){$("<img />").attr("src",a).appendTo("body").css("display","none").on("load",function(a){$(a.target).remove()})},fetchAndCacheNextPrevious:function(){var a=$("img.next-photo"),b=$("img.previous-photo");0<b.length&&OP.Util.fire("preload:photo",{id:b.attr("data-id"),sizes:"870x550"});0<a.length&&OP.Util.fire("preload:photo",{id:a.attr("data-id"),sizes:"870x550"})}}}();return{callback:{actionDelete:function(a){a.preventDefault();var a=$(a.target),b=a.attr("href")+".json",c=a.attr("data-id");
OP.Util.makeRequest(b,a.parent().serializeArray(),function(a){204===a.code?$(".action-container-"+c).hide("medium",function(){$(this).remove()}):opTheme.message.error("Could not delete the photo.")});return!1},actionPost:function(a){a.preventDefault();var b=$("#favorite-form"),a=b.attr("action")+".json",b=b.serialize();$.ajax({url:a,type:"POST",data:b,dataType:"json",success:function(a){location.href=201===a.code?location.pathname+"?c=favorited":location.pathname+"?e=unknown"}})},albumDelete:function(a){a.preventDefault();
var b=$(a.target),a=b.attr("href")+".json",c=b.parent(),b={crumb:g.get()};OP.Util.makeRequest(a,b,function(a){204===a.code?c.slideUp("medium",function(){this.remove()}):opTheme.message.error("We could not delete this group.")})},albumForm:function(a){a.preventDefault();a=$(a.target).attr("href")+".json";OP.Util.makeRequest(a,{modal:"true",dynamic:"true"},function(a){if(200===a.code){var c=$("#modal"),a=h.modal("Create an album",a.result.markup,null);c.html(a).modal();$(".typeahead",c).chosen()}else opTheme.message.error("Could not load the form to create an album.")},
"json","get");return!1},albumPost:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json",c=-1<b.search("create"),d=parseInt($('input[name="dynamic"]',a).val()),e={};e.name=$('input[name="name"]',a).val();e.visible=$('input[name="visible"]:checked',a).val();e.crumb=g.get();0==e.name.length?opTheme.message.error("Please enter a name for your album."):OP.Util.makeRequest(b,e,function(a){var b;200===a.code||201===a.code?d?opTheme.callback.albumPostDynamicCb(b,a.result):c?location.href=
"/manage/albums?m=album-created&rand="+parseInt(1E5*Math.random())+"#album-"+a.result.id:opTheme.message.confirm("Album updated successfully."):opTheme.message.error("Could not update album.")})},albumPostDynamicCb:function(a,b){var c=$('select[name="albums"]',a);$(".modal").modal("hide");$('<option value="'+b.id+'" selected="selected">'+b.name+"</option>").prependTo(c);c.trigger("liszt:updated")},batchAdd:function(a){$(".pin.photo-"+a.id).addClass("revealed pinned");opTheme.ui.batchMessage();j("Adding photo "+
a.id)},batchClear:function(){$(".pin.pinned").removeClass("revealed pinned");opTheme.ui.batchMessage()},batchField:function(a){var a=$(a.target).val(),b=$("form#batch-edit .form-fields");switch(a){case "albumsAdd":b.html(opTheme.ui.batchFormFields.albums());$("select",b).chosen();break;case "delete":b.html(opTheme.ui.batchFormFields.empty());break;case "groups":b.html(opTheme.ui.batchFormFields.groups());$("select",b).chosen();break;case "permission":b.html(opTheme.ui.batchFormFields.permission());
break;case "tagsAdd":case "tagsRemove":b.html(opTheme.ui.batchFormFields.tags())}},batchModal:function(){var a=$("#modal"),b=h.modal("Batch edit your pinned photos",'<form id="batch-edit">  <div class="clearfix">    <label>What would you like to do?</label>    <div class="input">      <select id="batch-key" class="batch-field-change" name="property">        <option value="tagsAdd">Add Tags</option>        <option value="tagsRemove">Remove Tags</option>        <option value="albumsAdd">Add Albums</option>        <option value="groups">Update Groups</option>        <option value="permission">Update Permissions</option>        <option value="delete">Delete</option>      </select>    </div>  </div>  <div class="form-fields">'+
opTheme.ui.batchFormFields.tags()+"</div></form>",'<a href="#" class="btn photo-update-batch-click">Submit</a>');a.html(b).modal()},batchRemove:function(a){$(".pin.photo-"+a).removeClass("pinned revealed");opTheme.ui.batchMessage();j("Removing photo "+a)},commentJump:function(a){a.preventDefault();$.scrollTo($("div.comment-form"),200);return!1},credentailDelete:function(a){a.preventDefault();var b=$(a.target),a=b.attr("href")+".json";OP.Util.makeRequest(a,{},function(a){204===a.code?(b.parent().parent().slideUp("medium",
function(){this.remove()}),opTheme.message.confirm("Application successfully deleted.")):opTheme.message.error("Could not delete Application.")});return!1},featuresPost:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json",c={},c={crumb:g.get()};c.allowDuplicate=$('input[name="allowDuplicate"]:checked',a).length;c.downloadOriginal=$('input[name="downloadOriginal"]:checked',a).length;c.hideFromSearchEngines=$('input[name="hideFromSearchEngines"]:checked',a).length;OP.Util.makeRequest(b,
c,opTheme.callback.featuresPostCb)},featuresPostCb:function(a){200===a.code?opTheme.message.confirm("Your features were successfully saved."):opTheme.message.error("We could not save your features.")},groupDelete:function(a){a.preventDefault();var b=$(a.target),a=b.attr("href")+".json",c=b.parent(),b={crumb:g.get()};OP.Util.makeRequest(a,b,function(a){204===a.code?c.slideUp("medium",function(){this.remove()}):opTheme.message.error("We could not delete this group.")})},groupEmailAdd:function(a){a.preventDefault();
var a=$(a.target).prev(),b=$("ul.group-emails-add-list",a.parent()),c=a.val();""!==c&&($('<li><span class="group-email-queue">'+c+'</span> <a href="#" class="group-email-remove-click"><i class="group-email-remove-click icon-minus-sign"></i></a></li>').prependTo(b),a.val(""))},groupEmailRemove:function(a){a.preventDefault();$(a.target).parent().parent().remove()},groupForm:function(a){a.preventDefault();a=$(a.target).attr("href")+".json";OP.Util.makeRequest(a,{modal:"true",dynamic:"true"},function(a){if(200===
a.code){var c=$("#modal"),a=h.modal("Create a group",a.result.markup,null);c.html(a).modal()}else opTheme.message.error("Could not load the form to create an album.")},"json","get");return!1},groupPost:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json",c=-1<b.search("create"),d=$('input[name="dynamic"]',a).val(),e,f={name:$('input[name="name"]',a).val()};f.crumb=g.get();$(".group-email-add-click",a).trigger("click");e=[];$("span.group-email-queue",a).each(function(a,b){e.push($(b).html())});
f.members=e.join(",");OP.Util.makeRequest(b,f,function(a){var b;200===a.code||201===a.code?d?opTheme.callback.groupPostDynamicCb(b,a.result):c?location.href="/manage/groups?m=group-created":opTheme.message.confirm("Group updated successfully."):opTheme.message.error("Could not update group.")})},groupPostDynamicCb:function(a,b){var c=$('select[name="groups"]',a);$(".modal").modal("hide");$('<option value="'+b.id+'" selected="selected">'+b.name+"</option>").prependTo(c);c.trigger("liszt:updated")},
keyBrowseNext:function(a){!a.ctrlKey&&!a.altKey&&!a.metaKey&&$("img.next-photo").click()},keyBrowsePrevious:function(a){!a.ctrlKey&&!a.altKey&&!a.metaKey&&$("img.previous-photo").click()},login:function(a){a.preventDefault();a=$(a.target);a.hasClass("browserid")?navigator.id.getVerifiedEmail(function(a){a?opTheme.user.browserid.loginSuccess(a):opTheme.user.browserid.loginFailure(a)}):a.hasClass("facebook")&&FB.login(function(a){a.authResponse?(j("User logged in, posting to openphoto host."),OP.Util.makeRequest("/user/facebook/login.json",
opTheme.user.base.loginProcessed)):j("User cancelled login or did not fully authorize.")},{scope:"email"});return!1},loginModal:function(a){a.preventDefault();$("#loginBox").modal()},loginOpenPhoto:function(a){a.preventDefault();var a=$(a.target),b=a.serialize();$.ajax({url:"/user/openphoto/login.json",dataType:"json",data:b+"&httpCodes=403",type:"POST",success:opTheme.user.base.loginProcessed,error:opTheme.callback.loginOpenPhotoFailedCb,context:a});return!1},loginOpenPhotoFailedCb:function(){$(this).find(".control-group").each(function(a,
b){$(b).addClass("error")})},modalClose:function(a){a.preventDefault();$(a.target).parent().parent().slideUp("fast",function(){$(this).remove()})},modalShown:function(a){a=$('input[type="text"]',a.target);0<a.length&&a[0].focus()},modalUnload:function(a){a.preventDefault();$("#modal-photo-detail").html("");f.replace(l)},passwordRequest:function(a){a.preventDefault();a=$(a.target).parent();a=$("#login-email",a).val();OP.Util.makeRequest("/user/password/request.json",{email:a},opTheme.callback.passwordRequestCb)},
passwordRequestCb:function(a){$("#loginBox").modal("hide");a.result?opTheme.message.confirm("An email has been sent with a link to reset your password."):opTheme.message.error("We were unable to send you a password request. Make sure you entered your email address correctly and that you are the owner of this site.")},passwordReset:function(a){a.preventDefault();var a=$(a.target).parent(),b=a.serializeArray();$(".input-password",a).val()!=$(".input-password-confirm",a).val()?opTheme.message.error("Your passwords did not match."):
OP.Util.makeRequest("/user/password/reset.json",b,opTheme.callback.passwordResetCb)},passwordResetCb:function(a){a.result?opTheme.message.confirm("Your password was updated successfully. You can now log in to your site."):opTheme.message.error("We were unable to update your password. Try requesting a new reset link.")},photoDelete:function(a){a.preventDefault();var b=$(a.target),a=b.parent().attr("action")+".json";OP.Util.makeRequest(a,b.parent().serializeArray(),function(a){204===a.code?(b.html("This photo has been deleted"),
opTheme.message.confirm("This photo has been deleted.")):opTheme.message.error("Could not delete the photo.")});return!1},photoEdit:function(a){a.preventDefault();a="/photo/"+$(a.target).attr("data-id")+"/edit.json";OP.Util.makeRequest(a,{},function(a){if(200===a.code){var c=$("#modal"),a=h.modal("Edit this photo",a.result.markup,null);c.html(a).modal();$(".typeahead",c).chosen()}else opTheme.message.error("Could not load the form to edit this photo.")},"json","get");return!1},photoView:function(a){a.preventDefault();
a=$(a.target).parent();$(".photo-view");var b=a.attr("href"),a=b;if($("body").hasClass("photo-details"))location.href=b;else{var c=$("#modal-photo-detail");$("#modal-photo-detail .photo-view");a=-1===a.indexOf("?")?a+"?modal=true":a+"&modal=true";c.load(a+" .photo-view",function(a){$("img.next-photo");$("img.previous-photo");f.insert(b,f.parse(a));k.fetchAndCacheNextPrevious()})}return!1},photoViewModal:function(a){if(!(900>k.getDeviceWidth())){a.preventDefault();a=$(a.target).parent();$(".photo-view");
var b=a=a.attr("href"),c=$("#modal-photo-detail"),b=-1===b.indexOf("?")?b+"?modal=true":b+"&modal=true";location.hash=a;c.load(b+" .photo-view",opTheme.callback.photoViewModalCb).modal().on("hidden",opTheme.callback.modalUnload);return!1}},photoViewModalCb:function(a){k.fetchAndCacheNextPrevious();f.insert(location.hash,f.parse(a))},photoUpdate:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json",c=a.serialize();0===$('select[name^="groups"] option:checked',a).length&&(c+="&groups=");
0===$('select[name^="albums"] option:checked',a).length&&(c+="&albums=");OP.Util.makeRequest(b,c,opTheme.callback.photoUpdateCb,"json","post")},photoUpdateBatch:function(a){a.preventDefault();var b=$(a.target),a=$("#batch-key").val(),c=$("form#batch-edit").find("*[name='value']"),d;b.html("Submitting...").attr("disabled","disabled");1==c.length?d=c.val():(b=$("form#batch-edit").find("*[name='value']:checked"),1==b.length?d=b.val():(d=[],b.each(function(a,b){d.push($(b).val())}),d=d.join(",")));b=
{crumb:g.get()};b[a]=d;b.ids=OP.Batch.collection.getIds().join(",");"delete"!==a?OP.Util.makeRequest("/photos/update.json",b,opTheme.callback.photoUpdateBatchCb,"json","post"):OP.Util.makeRequest("/photos/delete.json",b,opTheme.callback.photoUpdateBatchCb,"json","post")},photoUpdateBatchCb:function(a){200==a.code?opTheme.message.append(h.message("Your photos were successfully updated.","confirm")):204==a.code?(OP.Batch.clear(),opTheme.message.append(h.message("Your photos were successfully deleted.",
"confirm"))):opTheme.message.append(h.message("There was a problem updating your photos.","error"));$("#modal").modal("hide")},photoUpdateCb:function(a){200===a.code?opTheme.message.confirm("Your photo was successfully updated."):opTheme.message.error("We could not update your photo.");$("#modal").modal("hide")},photoUpload:function(a){a.preventDefault();a=$(a.target);a.attr("action");a.serialize()},photosViewMore:function(a){a.preventDefault();opTheme.init.pages.photos.load()},pinClick:function(a){var a=
$(a.target),b=a.attr("data-id");a.hasClass("pinned")?OP.Batch.remove(b):OP.Batch.add(b)},pinClearClick:function(a){a.preventDefault();OP.Batch.clear()},pinSelectAll:function(a){a.preventDefault();$(".pin").each(function(){id=$(this).attr("data-id");container=$(this).parent();container.hasClass("pinned")||OP.Batch.add(id)})},pluginView:function(a){a.preventDefault();var a=$(a.target).attr("href")+".json",b={crumb:g.get()},c=a.match(/\/plugin\/(.*)\/view.json$/);OP.Util.makeRequest("/plugin/"+c[1]+
"/view.json",b,function(a){200===a.code?$("#modal").html(h.modal("Update "+c[1],a.result.markup,null)).modal():opTheme.message.error("Unable to load this plugin for editing.")},"json","get")},pluginStatusToggle:function(a){a.preventDefault();var b=$(a.target),a=b.attr("href")+".json";OP.Util.makeRequest(a,{},function(a){var d=$(b).parent(),e=d.parent();200===a.code?($("div",e).removeClass("hide"),d.addClass("hide")):opTheme.message.error("Could not update the status of this plugin.")},"json","post");
return!1},pluginUpdate:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json";OP.Util.makeRequest(b,a.serializeArray(),function(a){200===a.code?opTheme.message.confirm("Your plugin was successfully updated."):opTheme.message.error("Could not update the status of this plugin.");$("#modal").modal("hide")},"json","post");return!1},preloadPhoto:function(a){OP.Util.makeRequest("/photo/"+a.id+"/view.json",{returnSizes:a.sizes,generate:"true"},opTheme.callback.preloadPhotoCb,"json",
"get")},preloadPhotoCb:function(a){var b=a.result;if(200===a.code)for(i in b)b.hasOwnProperty(i)&&!0===/^path[0-9]/.test(i)&&k.fetchAndCache(b[i])},popup:function(a){a.preventDefault();var b=$(a.target),a=b.attr("data-width"),c=b.attr("data-height"),b=b.attr("href");window.open(b,"openphoto","toolbar=0,menubar=0,location=1,directories=0,channelmode=0,width="+a+",height="+c)},searchByTags:function(a){a.preventDefault();var a=$(a.target),b=$($("select[name=tags]",a)[0]).val().join(","),c=a.attr("action");
0<b.length&&(0<c.search("/list")?location.href=c.replace("/list","")+"/tags-"+b+"/list":a.submit());return!1},settings:function(){$("ul#settingsbar").slideToggle("medium");$("li#nav-signin").toggleClass("active");return!1},share:{facebook:function(a){a.preventDefault();var a=$(a.target),b={method:"feed",display:"popup"};b.link=a.attr("data-link");b.picture=a.attr("data-picture");b.name=a.attr("data-name");b.description=a.attr("data-description");FB.ui(b,function(){window.close()})}},tagsInitialized:function(){var a=
OP.Tag.getTags(),b="";if(null!==a&&0<a.length)for(i in a)b+='<option value="'+a[i]+'">'+a[i]+"</option>";$(".typeahead-tags").html(b).chosen()},uploadCompleteSuccess:function(a){$("form.upload").fadeOut("fast",function(){OP.Util.makeRequest("/photos/upload/confirm.json",a,opTheme.callback.uploadConfirm,"json","post")})},uploadCompleteFailure:function(){$("form.upload").fadeOut("fast",function(){$(".upload-progress").fadeOut("fast",function(){$(".upload-warning .failed").html(failed);$(".upload-warning .total").html(total);
$(".upload-warning").fadeIn("fast")})})},uploadConfirm:function(a){$("body.upload .upload-container").fadeOut("fast",function(){$(".upload-confirm").fadeIn("fast")});$("body.upload .upload-confirm").html(a.result).show("fast")},webhookDelete:function(a){a.preventDefault();var b=$(a.target),a=b.attr("href")+".json";OP.Util.makeRequest(a,{},function(a){204===a.code?(b.parent().remove(),opTheme.message.confirm("Credential successfully deleted.")):opTheme.message.error("Could not delete credential.")});
return!1}},init:{load:function(a){var b="state"in window.history,c=location.href;g.set(a);OP.Tag.init();l=location.pathname;History.Adapter.bind(window,"statechange",function(){var a=History.getState(),e=!b&&location.href==c;b=!0;e||f.render(a.data)});$(".dropdown-toggle").dropdown();$(".modal").on("shown",opTheme.callback.modalShown);"/"===location.pathname?opTheme.init.pages.front():"/manage/photos"===location.pathname?opTheme.init.pages.manage.photos():0===location.pathname.search(/^\/photos(.*)\/list/)?
opTheme.init.pages.photos.init():0===location.pathname.search(/^\/p\/[a-z0-9]+/)||0===location.pathname.search(/^\/photo\/[a-z0-9]+\/?(.*)\/view/)?opTheme.init.pages.photo.init():"/photos/upload"===location.pathname&&opTheme.init.pages.upload()},attach:function(){OP.Util.on("click:action-delete",opTheme.callback.actionDelete);OP.Util.on("click:action-jump",opTheme.callback.commentJump);OP.Util.on("click:action-post",opTheme.callback.actionPost);OP.Util.on("click:album-delete",opTheme.callback.albumDelete);
OP.Util.on("click:album-form",opTheme.callback.albumForm);OP.Util.on("click:batch-modal",opTheme.callback.batchModal);OP.Util.on("click:credential-delete",opTheme.callback.credentailDelete);OP.Util.on("click:group-delete",opTheme.callback.groupDelete);OP.Util.on("click:group-email-add",opTheme.callback.groupEmailAdd);OP.Util.on("click:group-email-remove",opTheme.callback.groupEmailRemove);OP.Util.on("click:group-form",opTheme.callback.groupForm);OP.Util.on("click:login",opTheme.callback.login);OP.Util.on("click:login-modal",
opTheme.callback.loginModal);OP.Util.on("click:manage-password-request",opTheme.callback.passwordRequest);OP.Util.on("click:manage-password-reset",opTheme.callback.passwordReset);OP.Util.on("click:modal-close",opTheme.callback.modalClose);OP.Util.on("click:nav-item",opTheme.callback.searchBarToggle);OP.Util.on("click:photo-delete",opTheme.callback.photoDelete);OP.Util.on("click:photo-edit",opTheme.callback.photoEdit);OP.Util.on("click:photo-update-batch",opTheme.callback.photoUpdateBatch);OP.Util.on("click:photo-view",
opTheme.callback.photoView);OP.Util.on("click:photo-view-modal",opTheme.callback.photoViewModal);OP.Util.on("click:photos-load-more",opTheme.callback.photosViewMore);OP.Util.on("click:plugin-view",opTheme.callback.pluginView);OP.Util.on("click:plugin-status-toggle",opTheme.callback.pluginStatusToggle);OP.Util.on("click:pin",opTheme.callback.pinClick);OP.Util.on("click:pin-clear",opTheme.callback.pinClearClick);OP.Util.on("click:pin-select-all",opTheme.callback.pinSelectAll);OP.Util.on("click:popup",
opTheme.callback.popup);OP.Util.on("click:settings",opTheme.callback.settings);OP.Util.on("click:share-facebook",opTheme.callback.share.facebook);OP.Util.on("click:webhook-delete",opTheme.callback.webhookDelete);OP.Util.on("submit:album-post",opTheme.callback.albumPost);OP.Util.on("submit:features-post",opTheme.callback.featuresPost);OP.Util.on("submit:group-post",opTheme.callback.groupPost);OP.Util.on("submit:login-openphoto",opTheme.callback.loginOpenPhoto);OP.Util.on("submit:photo-update",opTheme.callback.photoUpdate);
OP.Util.on("submit:plugin-update",opTheme.callback.pluginUpdate);OP.Util.on("submit:search",opTheme.callback.searchByTags);OP.Util.on("keydown:browse-next",opTheme.callback.keyBrowseNext);OP.Util.on("keydown:browse-previous",opTheme.callback.keyBrowsePrevious);OP.Util.on("change:batch-field",opTheme.callback.batchField);OP.Util.on("callback:batch-add",opTheme.callback.batchAdd);OP.Util.on("callback:batch-remove",opTheme.callback.batchRemove);OP.Util.on("callback:batch-clear",opTheme.callback.batchClear);
OP.Util.on("callback:tags-initialized",opTheme.callback.tagsInitialized);OP.Util.on("upload:complete-success",opTheme.callback.uploadCompleteSuccess);OP.Util.on("upload:complete-failure",opTheme.callback.uploadCompleteFailure);OP.Util.on("tags:autocomplete",opTheme.callback.tagsAutocomplete);OP.Util.on("preload:photo",opTheme.callback.preloadPhoto)},pages:{front:function(){$(".carousel.front").swipe({swipeLeft:function(){("undefined"===typeof newBG||"undefined"===newBG)&&$(".carousel").carousel("next")},
swipeRight:function(){("undefined"===typeof newBG||"undefined"===newBG)&&$(".carousel").carousel("prev")},threshold:100});$(".carousel.front").carousel({interval:7E3});$(".carousel.front").on("slid",function(){var a=$(".carousel.front .active"),a=parseInt(a.attr("data-index"))+1;$(".carouselthumbs .active").removeClass("active");$(".carouselthumbs li:nth-child("+a+") a").addClass("active")});$(".carousel.feed").carousel();$(".carousel.feed").carousel("pause")},manage:{photos:function(){var a=OP.Batch.collection.getAll(),
b=OP.Batch.collection.getLength(),c=$(".pin"),d,e;0<b&&opTheme.ui.batchMessage();c.each(function(b,c){c=$(c);d=c.attr("class");console.log(d);e=d.match(/ photo-([a-z0-9]+)/);2==e.length&&void 0!==a[e[1]]&&c.addClass("revealed pinned")})}},photo:{init:function(){k.fetchAndCacheNextPrevious()}},photos:{initData:"undefined"===typeof initData?void 0:initData,filterOpts:"undefined"===typeof filterOpts?void 0:filterOpts,page:null,pageCount:0,pageLocation:window.location,maxMobilePageCount:5,end:!1,running:!1,
init:function(){var a=opTheme.init.pages.photos;$(window).scroll(a.scrollCb);a.load()},scrollCb:function(){var a=opTheme.init.pages.photos;900>k.getDeviceWidth()||$(window).scrollTop()>$(document).height()-$(window).height()-200&&a.load()},load:function(){var a=opTheme.init.pages.photos;loc=location;if("undefined"===typeof a.initData){if(!a.end&&!a.running){a.running=!0;if(null===a.page){var b=loc.href.match("page=([0-9]+)");null!==b?a.page=b[1]:(b=loc.pathname.match(/\/page-([0-9]+)/),null!==b&&
(a.page=b[1]));null===a.page&&(a.page=1)}b=a.pageLocation.pathname+".json";params={};qs=a.pageLocation.search.replace("?","");if(0<qs.length){var c=qs.split("&"),d;for(i in c)c.hasOwnProperty(i)&&(d=c[i].split("="),2===d.length&&(params[d[0]]=d[1]))}params.returnSizes="960x180";params.page=a.page;a.pageCount>a.maxMobilePageCount&&900>k.getDeviceWidth()?location.href=a.pageLocation.pathname+"?"+decodeURIComponent($.param(params)):$.getJSON(b,params,a.loadCb)}}else delete a.initData,a.page=1,a.loadCb({code:200,
result:initData})},loadCb:function(a){var a=a.result,b=opTheme.init.pages.photos,c=$(".infobar"),d=$(".startdate",c),c=$(".enddate",c);parseInt(d.attr("data-time"));var e=parseInt(c.attr("data-time")),f=opTheme.ui,h;if(a[0].totalPages>=b.page){var g;for(h=0;h<a.length;h++)g=parseInt(a[h].dateTaken),g>e?(f.fadeAndSet(c,phpjs.date("l F jS, Y",g)),c.attr("data-time",g),e=g):parseInt(a[h].dateTaken)<parseInt(d.attr("data-time"))&&(f.fadeAndSet(d,phpjs.date("l F jS, Y",g)),d.attr("data-time",g));Gallery.showImages($(".photo-grid-justify"),
a);b.page++;b.pageCount++;b.running=!1}else $(".load-more").hide(),b.end=!0}},upload:function(){$("form.upload");"object"===typeof OPU&&OPU.init();$("select.typeahead").chosen()}}},message:{append:function(a){var b=$(".message:first").clone(!1),c=$(".message:last");b.addClass("alert alert-info").html(a);c.after(b).slideDown()},confirm:function(a){opTheme.message.show(a,"confirm")},error:function(a){opTheme.message.show(a,"error")},show:function(a,b){opTheme.message.append(h.message(a,b))}},ui:{batchFormFields:{albums:function(){var a,
b="";$.ajax({url:"/albums/list.json",data:{pageSize:"0"},async:!1,success:function(c){if(200===c.code){b+='<label>Select albums</label><select name="value" multiple>';for(i in c.result)c.result.hasOwnProperty(i)&&(a=c.result[i],b+='<option value="'+a.id+'">'+a.name+"</option>");b+="</select>"}}});return b},empty:function(){return""},groups:function(){var a,b="";$.ajax({url:"/groups/list.json",async:!1,success:function(c){if(200===c.code){b+='<label>Select groups</label><select name="value" multiple>';
for(i in c.result)c.result.hasOwnProperty(i)&&(a=c.result[i],b+='<option value="'+a.id+'">'+a.name+"</option>");b+="</select>"}}});return b},permission:function(){return'  <label class="radio">    <input type="radio" name="value" value="1" checked="checked">    Public  </label>  <label class="radio">    <input type="radio" name="value" value="0">     Private  </label>'},tags:function(){return'  <label>Tags</label>  <input type="text" name="value" class="tags-autocomplete" placeholder="A comma separated list of tags" value="">'}},
batchMessage:function(){var a=OP.Batch.collection.getLength();0<$("#batch-message").length&&0<a?$("#batch-count").html(a):0==a?$("#batch-message").parent().parent().slideUp("fast",function(){$(this).html("").removeClass()}):opTheme.message.append(h.message('  <a id="batch-message"></a>You have <span id="batch-count">'+a+'</span> photos pinned.  <div><a class="btn small info batch-modal-click" data-controls-modal="modal" data-backdrop="static">Batch edit</a>&nbsp;<a href="#" class="btn small pin-clear-click">Or clear pins</a></div>'))},
fadeAndSet:function(a,b){var c=$(a);c.fadeOut("fast",function(){c.html(b).fadeIn("fast")})}},user:{base:{loginProcessed:function(a){200!=a.code?j("processing of login failed"):(j("login processing succeeded"),window.location.reload())}},browserid:{loginFailure:function(){j("login failed")},loginSuccess:function(a){OP.Util.makeRequest("/user/browserid/login.json",{assertion:a},opTheme.user.base.loginProcessed)}}}}}();
/* 09-phpjs.min.js */
var phpjs=function(){return{date:function(i,j){var d,a,g=/\\?([a-z])/gi,f,e=function(b,a){return(b+="").length<a?Array(++a-b.length).join("0")+b:b},h="Sun,Mon,Tues,Wednes,Thurs,Fri,Satur,January,February,March,April,May,June,July,August,September,October,November,December".split(",");f=function(b,c){return a[b]?a[b]():c};a={d:function(){return e(a.j(),2)},D:function(){return a.l().slice(0,3)},j:function(){return d.getDate()},l:function(){return h[a.w()]+"day"},N:function(){return a.w()||7},S:function(){var b=
a.j();return 4>b|20<b&&["st","nd","rd"][b%10-1]||"th"},w:function(){return d.getDay()},z:function(){var b=new Date(a.Y(),a.n()-1,a.j()),c=new Date(a.Y(),0,1);return Math.round((b-c)/864E5)+1},W:function(){var b=new Date(a.Y(),a.n()-1,a.j()-a.N()+3),c=new Date(b.getFullYear(),0,4);return e(1+Math.round((b-c)/864E5/7),2)},F:function(){return h[6+a.n()]},m:function(){return e(a.n(),2)},M:function(){return a.F().slice(0,3)},n:function(){return d.getMonth()+1},t:function(){return(new Date(a.Y(),a.n(),
0)).getDate()},L:function(){var b=a.Y();return 0==b%4&0!=b%100|0==b%400},o:function(){var b=a.n(),c=a.W();return a.Y()+(12===b&&9>c?-1:1===b&&9<c)},Y:function(){return d.getFullYear()},y:function(){return(a.Y()+"").slice(-2)},a:function(){return 11<d.getHours()?"pm":"am"},A:function(){return a.a().toUpperCase()},B:function(){var a=3600*d.getUTCHours(),c=60*d.getUTCMinutes(),f=d.getUTCSeconds();return e(Math.floor((a+c+f+3600)/86.4)%1E3,3)},g:function(){return a.G()%12||12},G:function(){return d.getHours()},
h:function(){return e(a.g(),2)},H:function(){return e(a.G(),2)},i:function(){return e(d.getMinutes(),2)},s:function(){return e(d.getSeconds(),2)},u:function(){return e(1E3*d.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)";},I:function(){var b=new Date(a.Y(),0),c=Date.UTC(a.Y(),0),d=new Date(a.Y(),6),e=Date.UTC(a.Y(),6);return 0+(b-c!==d-e)},O:function(){var a=d.getTimezoneOffset(),c=Math.abs(a);return(0<a?"-":"+")+e(100*Math.floor(c/
60)+c%60,4)},P:function(){var b=a.O();return b.substr(0,3)+":"+b.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-d.getTimezoneOffset()},c:function(){return"Y-m-d\\Th:i:sP".replace(g,f)},r:function(){return"D, d M Y H:i:s O".replace(g,f)},U:function(){return d/1E3|0}};this.date=function(a,c){d=null==c?new Date:c instanceof Date?new Date(c):new Date(1E3*c);return a.replace(g,f)};return this.date(i,j)}}}();
/* 10-touchSwipe.min.js */
(function(s){s.fn.swipe=function(d){if(!this)return!1;var b={fingers:1,threshold:75,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto"},p="left",t="right",u="up",v="down",w="none",x="horizontal",y="vertical",G="auto",H="start",z="move",q="end",k="cancel",e="ontouchstart"in window,I=e?"touchstart":"mousedown",A=e?"touchmove":"mousemove",B=e?"touchend":"mouseup",c="start";if(void 0==d.allowPageScroll&&(void 0!=
d.swipe||void 0!=d.swipeStatus))d.allowPageScroll=w;d&&s.extend(b,d);return this.each(function(){var g,d,n,o;function J(a){var h=e?a.touches[0]:a;c=H;e&&(i=a.touches.length);distance=0;direction=null;i==b.fingers||!e?(n=g=h.pageX,o=d=h.pageY,b.swipeStatus&&l(a,c)):m(a);r.addEventListener(A,C,!1);r.addEventListener(B,D,!1)}function C(a){if(!(c==q||c==k)){var h=e?a.touches[0]:a;g=h.pageX;d=h.pageY;direction=E();e&&(i=a.touches.length);c=z;h=direction;if(b.allowPageScroll==w)a.preventDefault();else{var f=
b.allowPageScroll==G;switch(h){case p:(b.swipeLeft&&f||!f&&b.allowPageScroll!=x)&&a.preventDefault();break;case t:(b.swipeRight&&f||!f&&b.allowPageScroll!=x)&&a.preventDefault();break;case u:(b.swipeUp&&f||!f&&b.allowPageScroll!=y)&&a.preventDefault();break;case v:(b.swipeDown&&f||!f&&b.allowPageScroll!=y)&&a.preventDefault()}}i==b.fingers||!e?(distance=F(),b.swipeStatus&&l(a,c,direction,distance),!b.triggerOnTouchEnd&&distance>=b.threshold&&(c=q,l(a,c),m(a))):(c=k,l(a,c),m(a))}}function D(a){a.preventDefault();
distance=F();direction=E();b.triggerOnTouchEnd?(c=q,(i==b.fingers||!e)&&0!=g?distance>=b.threshold||(c=k):c=k,l(a,c),m(a)):c==z&&(c=k,l(a,c),m(a));r.removeEventListener(A,C,!1);r.removeEventListener(B,D,!1)}function m(){d=g=o=n=i=0}function l(a,c){b.swipeStatus&&b.swipeStatus.call(j,a,c,direction||null,distance||0);c==k&&b.click&&(1==i||!e)&&(isNaN(distance)||0==distance)&&b.click.call(j,a,a.target);if(c==q)switch(b.swipe&&b.swipe.call(j,a,direction,distance),direction){case p:b.swipeLeft&&b.swipeLeft.call(j,
a,direction,distance);break;case t:b.swipeRight&&b.swipeRight.call(j,a,direction,distance);break;case u:b.swipeUp&&b.swipeUp.call(j,a,direction,distance);break;case v:b.swipeDown&&b.swipeDown.call(j,a,direction,distance)}}function F(){return Math.round(Math.sqrt(Math.pow(g-n,2)+Math.pow(d-o,2)))}function E(){var a;a=Math.atan2(d-o,n-g);a=Math.round(180*a/Math.PI);0>a&&(a=360-Math.abs(a));return 45>=a&&0<=a?p:360>=a&&315<=a?p:135<=a&&225>=a?t:45<a&&135>a?v:u}var r=this,j=s(this),i=0;n=0;o=0;g=0;d=
0;try{this.addEventListener(I,J,!1),this.addEventListener("touchcancel",m)}catch(K){}})}})(jQuery);
