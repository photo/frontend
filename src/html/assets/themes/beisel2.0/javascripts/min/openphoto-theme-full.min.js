/* 01-bootstrap.min.js */
/**
* Bootstrap.js by @fat & @mdo
* plugins: bootstrap-transition.js, bootstrap-modal.js, bootstrap-dropdown.js, bootstrap-scrollspy.js, bootstrap-tab.js, bootstrap-tooltip.js, bootstrap-popover.js, bootstrap-alert.js, bootstrap-button.js, bootstrap-collapse.js, bootstrap-carousel.js, bootstrap-typeahead.js
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(a){a(function(){a.support.transition=function(){var b=document.body||document.documentElement,c=b.style,d=c.transition!==undefined||c.WebkitTransition!==undefined||c.MozTransition!==undefined||c.MsTransition!==undefined||c.OTransition!==undefined;return d&&{end:function(){var b="TransitionEnd";return a.browser.webkit?b="webkitTransitionEnd":a.browser.mozilla?b="transitionend":a.browser.opera&&(b="oTransitionEnd"),b}()}}()})}(window.jQuery),!function(a){function c(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),d.call(b)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),d.call(b)})}function d(a){this.$element.hide().trigger("hidden"),e.call(this)}function e(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(f,this)):f.call(this)):b&&b()}function f(){this.$backdrop.remove(),this.$backdrop=null}function g(){var b=this;this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",function(a){a.which==27&&b.hide()}):this.isShown||a(document).off("keyup.dismiss.modal")}var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this;if(this.isShown)return;a("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),g.call(this),e.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");!b.$element.parent().length&&b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in"),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();if(!this.isShown)return;var e=this;this.isShown=!1,a("body").removeClass("modal-open"),g.call(this),this.$element.trigger("hide").removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):d.call(this)}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({},e.data(),c.data());b.preventDefault(),e.modal(f)})})}(window.jQuery),!function(a){function d(){a(b).parent().removeClass("open")}var b='[data-toggle="dropdown"]',c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),e=c.attr("data-target"),f,g;return e||(e=c.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),f=a(e),f.length||(f=c.parent()),g=f.hasClass("open"),d(),!g&&f.toggleClass("open"),!1}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api",d),a("body").on("click.dropdown.data-api",b,c.prototype.toggle)})}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body").on("click.scroll.data-api",this.selector,d),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){this.targets=this.$body.find(this.selector).map(function(){var b=a(this).attr("href");return/^#\w/.test(b)&&a(b).length?b:null}),this.offsets=a.map(this.targets,function(b){return a(b).position().top})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.offsets,c=this.targets,d=this.activeTarget,e;for(e=b.length;e--;)d!=c[e]&&a>=b[e]&&(!b[e+1]||a<=b[e+1])&&this.activate(c[e])},activate:function(a){var b;this.activeTarget=a,this.$body.find(this.selector).parent(".active").removeClass("active"),b=this.$body.find(this.selector+'[href="'+a+'"]').parent("li").addClass("active"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0],b.trigger({type:"show",relatedTarget:e}),f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})})}(window.jQuery),!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);!c.options.delay||!c.options.delay.show?c.show():(c.hoverState="in",setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show))},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);!c.options.delay||!c.options.delay.hide?c.hide():(c.hoverState="out",setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide))},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip();a.find(".tooltip-inner").html(this.getTitle()),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a=a.toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery),!function(a){var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var b=this.tip(),c=this.getTitle(),d=this.getContent();b.find(".popover-title")[a.type(c)=="object"?"append":"html"](c),b.find(".popover-content > *")[a.type(d)=="object"?"append":"html"](d),b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a=a.toString().replace(/(^\s*|\s*$)/,""),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(a){var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype={constructor:c,close:function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),e.trigger("close"),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger("close").removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()}},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype={constructor:b,setState:function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},toggle:function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")}},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find(".in"),e;d&&d.length&&(e=d.data("collapse"),d.collapse("hide"),e||d.data("collapse",null)),this.$element[b](0),this.transition("addClass","show","shown"),this.$element[b](this.$element[0][c])},hide:function(){var a=this.dimension();this.reset(this.$element[a]()),this.transition("removeClass","hide","hidden"),this.$element[a](0)},reset:function(a){var b=this.dimension();this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element.addClass("collapse")},transition:function(b,c,d){var e=this,f=function(){c=="show"&&e.reset(),e.$element.trigger(d)};this.$element.trigger(c)[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();a(e).collapse(f)})})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.carousel.defaults,c),this.options.slide&&this.slide(this.options.slide)};b.prototype={cycle:function(){return this.interval=setInterval(a.proxy(this.next,this),this.options.interval),this},to:function(b){var c=this.$element.find(".active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(){return clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this;if(!e.length)return;return this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h](),!a.support.transition&&this.$element.hasClass("slide")?(this.$element.trigger("slide"),d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")):(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.trigger("slide"),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})),f&&this.cycle(),this}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=typeof c=="object"&&c;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):typeof c=="string"||(c=f.slide)?e[c]():e.cycle()})},a.fn.carousel.defaults={interval:5e3},a.fn.carousel.Constructor=b,a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!e.data("modal")&&a.extend({},e.data(),c.data());e.carousel(f),b.preventDefault()})})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(a),this.hide()},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c=this,d,e;return this.query=this.$element.val(),this.query?(d=a.grep(this.source,function(a){if(c.matcher(a))return a}),d=this.sorter(d),d.length?this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){return a.replace(new RegExp("("+this.query+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),(a.browser.webkit||a.browser.msie)&&this.$element.on("keydown",a.proxy(this.keypress,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},keyup:function(a){a.stopPropagation(),a.preventDefault();switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:this.hide();break;default:this.lookup()}},keypress:function(a){a.stopPropagation();if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}},blur:function(a){var b=this;a.stopPropagation(),a.preventDefault(),setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},a.fn.typeahead.Constructor=b,a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})})}(window.jQuery);
/* 01a-chosen.jquery.min.js */
(function(){var b=function(){this.options_index=0;this.parsed=[]};b.prototype.add_node=function(b){return"OPTGROUP"===b.nodeName?this.add_group(b):this.add_option(b)};b.prototype.add_group=function(b){var e,f,h,d,g,i;e=this.parsed.length;this.parsed.push({array_index:e,group:!0,label:b.label,children:0,disabled:b.disabled});g=b.childNodes;i=[];h=0;for(d=g.length;h<d;h++)f=g[h],i.push(this.add_option(f,e,b.disabled));return i};b.prototype.add_option=function(b,e,f){if("OPTION"===b.nodeName)return""!==
b.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:b.value,text:b.text,html:b.innerHTML,selected:b.selected,disabled:!0===f?f:b.disabled,group_array_index:e,classes:b.className,style:b.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};b.select_to_array=function(j){var e,f,h,d;e=new b;d=j.childNodes;f=0;for(h=d.length;f<h;f++)j=d[f],e.add_node(j);
return e.parsed};this.SelectParser=b}).call(this);
(function(){var b=function(b,e){this.form_field=b;this.options=null!=e?e:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()};b.prototype.set_default_values=function(){var b=this;this.click_test_action=function(e){return b.test_active_click(e)};this.activate_action=function(e){return b.activate_field(e)};this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_single_selected=
this.result_highlighted=null;this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.search_contains=this.options.search_contains||!1;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||!1;return this.max_selected_options=this.options.max_selected_options||Infinity};b.prototype.set_default_text=
function(){this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option";return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"};b.prototype.mouse_enter=function(){return this.mouse_on_container=
!0};b.prototype.mouse_leave=function(){return this.mouse_on_container=!1};b.prototype.input_focus=function(){var b=this;if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)};b.prototype.input_blur=function(){var b=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return b.blur_test()},100)};b.prototype.result_add_option=function(b){var e,f;if(b.disabled)return"";b.dom_id=this.container_id+"_o_"+b.array_index;e=b.selected&&this.is_multiple?
[]:["active-result"];b.selected&&e.push("result-selected");null!=b.group_array_index&&e.push("group-option");""!==b.classes&&e.push(b.classes);f=""!==b.style.cssText?' style="'+b.style+'"':"";return'<li id="'+b.dom_id+'" class="'+e.join(" ")+'"'+f+">"+b.html+"</li>"};b.prototype.results_update_field=function(){this.is_multiple||this.results_reset_cleanup();this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};b.prototype.results_toggle=function(){return this.results_showing?
this.results_hide():this.results_show()};b.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()};b.prototype.keyup_checker=function(b){var e,f;e=null!=(f=b.which)?f:b.keyCode;this.search_field_scale();switch(e){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:b.preventDefault();if(this.results_showing)return this.result_select(b);
break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};b.prototype.generate_field_id=function(){var b;b=this.generate_random_id();return this.form_field.id=b};b.prototype.generate_random_char=function(){var b;b=Math.floor(36*Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(b,b+1)};this.AbstractChosen=b}).call(this);
(function(){var b,j,e,f,h=Object.prototype.hasOwnProperty;f=this;b=jQuery;b.fn.extend({chosen:function(a){return b.browser.msie&&("6.0"===b.browser.version||"7.0"===b.browser.version)?this:this.each(function(){var c;c=b(this);if(!c.hasClass("chzn-done"))return c.data("chosen",new j(this,a))})}});var d=function(){d.__super__.constructor.apply(this,arguments)},g=d,i=AbstractChosen,m=function(){this.constructor=g},k;for(k in i)h.call(i,k)&&(g[k]=i[k]);m.prototype=i.prototype;g.prototype=new m;g.__super__=
i.prototype;d.prototype.setup=function(){this.form_field_jq=b(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};d.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};d.prototype.set_up_html=function(){var a,c;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();a=b("<div />",
{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?a.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):a.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>');
this.form_field_jq.hide().after(a);this.container=b("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();a=this.container.height();c=this.f_width-e(this.dropdown);this.dropdown.css({width:c+"px",top:a+"px"});this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();
this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),a=c-e(this.search_container)-e(this.search_field),this.search_field.css({width:a+"px"}));this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};d.prototype.register_observers=
function(){var a=this;this.container.mousedown(function(c){return a.container_mousedown(c)});this.container.mouseup(function(c){return a.container_mouseup(c)});this.container.mouseenter(function(c){return a.mouse_enter(c)});this.container.mouseleave(function(c){return a.mouse_leave(c)});this.search_results.mouseup(function(c){return a.search_results_mouseup(c)});this.search_results.mouseover(function(c){return a.search_results_mouseover(c)});this.search_results.mouseout(function(c){return a.search_results_mouseout(c)});
this.form_field_jq.bind("liszt:updated",function(c){return a.results_update_field(c)});this.search_field.blur(function(c){return a.input_blur(c)});this.search_field.keyup(function(c){return a.keyup_checker(c)});this.search_field.keydown(function(c){return a.keydown_checker(c)});return this.is_multiple?(this.search_choices.click(function(c){return a.choices_click(c)}),this.search_field.focus(function(c){return a.input_focus(c)})):this.container.click(function(a){return a.preventDefault()})};d.prototype.search_field_disabled=
function(){if(this.is_disabled=this.form_field_jq[0].disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)};d.prototype.container_mousedown=function(a){var c;if(!this.is_disabled){c=null!=a?b(a.target).hasClass("search-choice-close"):
!1;a&&("mousedown"===a.type&&!this.results_showing)&&a.stopPropagation();if(!this.pending_destroy_click&&!c){if(this.active_field){if(!this.is_multiple&&a&&(b(a.target)[0]===this.selected_item[0]||b(a.target).parents("a.chzn-single").length))a.preventDefault(),this.results_toggle()}else this.is_multiple&&this.search_field.val(""),b(document).click(this.click_test_action),this.results_show();return this.activate_field()}return this.pending_destroy_click=!1}};d.prototype.container_mouseup=function(a){if("ABBR"===
a.target.nodeName&&!this.is_disabled)return this.results_reset(a)};d.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};d.prototype.close_field=function(){b(document).unbind("click",this.click_test_action);this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1));this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");
this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};d.prototype.activate_field=function(){!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1));this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};d.prototype.test_active_click=function(a){return b(a.target).parents("#"+
this.container_id).length?this.active_field=!0:this.close_field()};d.prototype.results_build=function(){var a,c,b,d,e;this.parsing=!0;this.results_data=f.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):
this.container.removeClass("chzn-container-single-nosearch"));a="";e=this.results_data;b=0;for(d=e.length;b<d;b++)c=e[b],c.group?a+=this.result_add_group(c):c.empty||(a+=this.result_add_option(c),c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(c.text),this.allow_single_deselect&&this.single_deselect_control_build()));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();
this.search_results.html(a);return this.parsing=!1};d.prototype.result_add_group=function(a){if(a.disabled)return"";a.dom_id=this.container_id+"_g_"+a.array_index;return'<li id="'+a.dom_id+'" class="group-result">'+b("<div />").text(a.label).html()+"</li>"};d.prototype.result_do_highlight=function(a){var b,d,e,f;if(a.length){this.result_clear_highlight();this.result_highlight=a;this.result_highlight.addClass("highlighted");d=parseInt(this.search_results.css("maxHeight"),10);f=this.search_results.scrollTop();
e=d+f;b=this.result_highlight.position().top+this.search_results.scrollTop();a=b+this.result_highlight.outerHeight();if(a>=e)return this.search_results.scrollTop(0<a-d?a-d:0);if(b<f)return this.search_results.scrollTop(b)}};d.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};d.prototype.results_show=function(){var a;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",
{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);a=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:a+"px",left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};d.prototype.results_hide=function(){this.is_multiple||
this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=!1};d.prototype.set_tab_index=function(){var a;if(this.form_field_jq.attr("tabindex")){a=this.form_field_jq.attr("tabindex");this.form_field_jq.attr("tabindex",-1);if(this.is_multiple)return this.search_field.attr("tabindex",a);this.selected_item.attr("tabindex",a);return this.search_field.attr("tabindex",
-1)}};d.prototype.show_search_field_default=function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};d.prototype.search_results_mouseup=function(a){var c;c=b(a.target).hasClass("active-result")?b(a.target):b(a.target).parents(".active-result").first();if(c.length)return this.result_highlight=c,this.result_select(a)};d.prototype.search_results_mouseover=
function(a){if(a=b(a.target).hasClass("active-result")?b(a.target):b(a.target).parents(".active-result").first())return this.result_do_highlight(a)};d.prototype.search_results_mouseout=function(a){if(b(a.target).hasClass("active-result"))return this.result_clear_highlight()};d.prototype.choices_click=function(a){a.preventDefault();if(this.active_field&&!b(a.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};d.prototype.choice_build=function(a){var c,d=this;if(this.is_multiple&&
this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;c=this.container_id+"_c_"+a.array_index;this.choices+=1;this.search_container.before('<li class="search-choice" id="'+c+'"><span>'+a.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+a.array_index+'"></a></li>');return b("#"+c).find("a").first().click(function(a){return d.choice_destroy_link_click(a)})};d.prototype.choice_destroy_link_click=function(a){a.preventDefault();
if(this.is_disabled)return a.stopPropagation;this.pending_destroy_click=!0;return this.choice_destroy(b(a.target))};d.prototype.choice_destroy=function(a){this.choices-=1;this.show_search_field_default();this.is_multiple&&(0<this.choices&&1>this.search_field.val().length)&&this.results_hide();this.result_deselect(a.attr("rel"));return a.parents("li").first().remove()};d.prototype.results_reset=function(){this.form_field.options[0].selected=!0;this.selected_item.find("span").text(this.default_text);
this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};d.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()};d.prototype.result_select=function(a){var b,d;if(this.result_highlight)return b=this.result_highlight,d=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),
this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),b=d.substr(d.lastIndexOf("_")+1),b=this.results_data[b],b.selected=!0,this.form_field.options[b.options_index].selected=!0,this.is_multiple?this.choice_build(b):(this.selected_item.find("span").first().text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!a.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==
this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[b.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()};d.prototype.result_activate=function(a){return a.addClass("active-result")};d.prototype.result_deactivate=function(a){return a.removeClass("active-result")};d.prototype.result_deselect=function(a){var c;c=this.results_data[a];c.selected=!1;this.form_field.options[c.options_index].selected=!1;b("#"+this.container_id+
"_o_"+a).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[c.options_index].value});return this.search_field_scale()};d.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&1>this.selected_item.find("abbr").length)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};d.prototype.winnow_results=
function(){var a,c,d,e,f,h,i,g,l,j,k,n,m,p,o;this.no_results_clear();g=0;l=this.search_field.val()===this.default_text?"":b("<div/>").text(b.trim(this.search_field.val())).html();f=RegExp((this.search_contains?"":"^")+l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");j=RegExp(l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");o=this.results_data;k=0;for(m=o.length;k<m;k++)if(c=o[k],!c.disabled&&!c.empty)if(c.group)b("#"+c.dom_id).css("display","none");else if(!this.is_multiple||!c.selected){a=!1;i=
c.dom_id;h=b("#"+i);if(f.test(c.html))a=!0,g+=1;else if(0<=c.html.indexOf(" ")||0===c.html.indexOf("["))if(e=c.html.replace(/\[|\]/g,"").split(" "),e.length){n=0;for(p=e.length;n<p;n++)d=e[n],f.test(d)&&(a=!0,g+=1)}a?(l.length?(a=c.html.search(j),d=c.html.substr(0,a+l.length)+"</em>"+c.html.substr(a+l.length),d=d.substr(0,a)+"<em>"+d.substr(a)):d=c.html,h.html(d),this.result_activate(h),null!=c.group_array_index&&b("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&
i===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}return 1>g&&l.length?this.no_results(l):this.winnow_results_set_highlight()};d.prototype.winnow_results_clear=function(){var a,c,d,e,f;this.search_field.val("");c=this.search_results.find("li");f=[];d=0;for(e=c.length;d<e;d++)a=c[d],a=b(a),a.hasClass("group-result")?f.push(a.css("display","auto")):!this.is_multiple||!a.hasClass("result-selected")?f.push(this.result_activate(a)):f.push(void 0);return f};
d.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[],a=a.length?a.first():this.search_results.find(".active-result").first(),null!=a))return this.result_do_highlight(a)};d.prototype.no_results=function(a){var c;c=b('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');c.find("span").first().html(a);return this.search_results.append(c)};d.prototype.no_results_clear=
function(){return this.search_results.find(".no-results").remove()};d.prototype.keydown_arrow=function(){var a;this.result_highlight?this.results_showing&&(a=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(a):(a=this.search_results.find("li.active-result").first())&&this.result_do_highlight(b(a));if(!this.results_showing)return this.results_show()};d.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=
this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};d.prototype.keydown_backstroke=function(){if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();this.pending_backstroke=this.search_container.siblings("li.search-choice").last();return this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};
d.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};d.prototype.keydown_checker=function(a){var b,d;b=null!=(d=a.which)?d:a.keyCode;this.search_field_scale();8!==b&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;
case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};d.prototype.search_field_scale=function(){var a,c,d,e,f;if(this.is_multiple){c="position:absolute; left: -1000px; top: -1000px; display:none;";d="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");e=0;for(f=d.length;e<f;e++)a=d[e],c+=a+":"+this.search_field.css(a)+";";a=b("<div />",{style:c});a.text(this.search_field.val());b("body").append(a);
c=a.width()+25;a.remove();c>this.f_width-10&&(c=this.f_width-10);this.search_field.css({width:c+"px"});a=this.container.height();return this.dropdown.css({top:a+"px"})}};d.prototype.generate_random_id=function(){var a;for(a="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();0<b("#"+a).length;)a+=this.generate_random_char();return a};j=d;e=function(a){return a.outerWidth()-a.width()};f.get_side_border_padding=e}).call(this);
/* 02-bootstrap-modal.min.js */
!function(a){function g(){this.$element.hide().trigger("hidden");h.call(this)}function h(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body);"static"!=this.options.backdrop&&this.$backdrop.click(a.proxy(this.hide,this));d&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&
this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(i,this)):i.call(this)):b&&b()}function i(){this.$backdrop.remove();this.$backdrop=null}function j(){var b=this;if(this.isShown&&this.options.keyboard)a(document).on("keyup.dismiss.modal",function(a){27==a.which&&b.hide()});else this.isShown||a(document).off("keyup.dismiss.modal")}var f=function(b,c){this.options=c;this.$element=a(b).delegate('[data-dismiss="modal"]',
"click.dismiss.modal",a.proxy(this.hide,this))};f.prototype={constructor:f,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var b=this;this.isShown||(a("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),j.call(this),h.call(this,function(){var c=a.support.transition&&b.$element.hasClass("fade");!b.$element.parent().length&&b.$element.appendTo(document.body);b.$element.show();c&&b.$element[0].offsetWidth;b.$element.addClass("in");c?b.$element.one(a.support.transition.end,
function(){b.$element.trigger("shown")}):b.$element.trigger("shown")}))},hide:function(b){b&&b.preventDefault();if(this.isShown)if(this.isShown=!1,a("body").removeClass("modal-open"),j.call(this),this.$element.trigger("hide").removeClass("in"),a.support.transition&&this.$element.hasClass("fade")){var c=this,d=setTimeout(function(){c.$element.off(a.support.transition.end);g.call(c)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(d);g.call(c)})}else g.call(this)}};a.fn.modal=
function(b){return this.each(function(){var c=a(this),d=c.data("modal"),e=a.extend({},a.fn.modal.defaults,c.data(),"object"==typeof b&&b);d||c.data("modal",d=new f(this,e));if("string"==typeof b)d[b]();else e.show&&d.show()})};a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};a.fn.modal.Constructor=f;a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),c=e.data("modal")?
"toggle":a.extend({},e.data(),c.data());b.preventDefault();e.modal(c)})})}(window.jQuery);
/* 05-gallery.min.js */
var Gallery=function(i){var g=0,o=null,k={thumbnailSize:"960x180",marginsOfImage:6,defaultWidthValue:120,defaultHeightValue:120},j=function(f,d){return void 0===typeof f||null==f?d:f},p=function(f){var d=i("<div/>"),e=i("<a/>");d.attr("class","date-placeholder");e.html('<i class="icon-calendar icon-large""></i> '+phpjs.date("M jS, Y",f));d.append(e);return d},q=function(f,d){var e=[],a=0,h="photo"+k.thumbnailSize;0<g&&(f=g);g=f;for(var l=k.marginsOfImage;0<d.length&&a<f;){var c=d.shift();e.push(c);
a+=c[h][1]+l}c=a-f;if(0<e.length&&0<c){var i=a,a=[],n=0,m="photo"+k.thumbnailSize,b;for(b in e)a[b]=Math.floor(e[b][m][1]/i*c),n+=a[b];for(c-=n;0<c;)for(b in a)if(a[b]++,c--,0==c)break;for(var j in e)b=a[j],c=e[j],c.vx=Math.floor(b/2),c.vwidth=c[h][1]-b,g-=c.vwidth+l}else for(j in e)c=e[j],c.vx=0,c.vwidth=c[h][1],g-=c.vwidth+l;return e},r=function(f,d){var e=opTheme.init.pages.photos,a=e.pageLocation.search.replace(/(page|returnSizes)=[^&?]+\&?/g,""),h=i('<div class="imageContainer"/>'),l=new Date(1E3*
d.dateTaken),c="path"+k.thumbnailSize,g=k.defaultWidthValue,n=k.defaultHeightValue,m=i("<div/>");m.css("width",""+j(d.vwidth,g)+"px");m.css("height",""+j(d[c][1],n)+"px");m.css("overflow","hidden");var b;b=d.url.replace("//","/").split("/");b[1]=b[1].split(":");b.splice(0,2);b="/"+b.join("/");b=b.split("#");b=b[0];b=b.split("?");b=b[0];null!==e.filterOpts&&0<e.filterOpts.length&&(b=0===a.length?b+"/"+e.filterOpts:b.replace("?","/"+e.filterOpts+"?"));e=i("<a/>");e.attr("href",b+a);a=i("<img/>");a.attr("src",
d[c]);a.attr("class","photo-view-modal-click");a.attr("title",d.title);a.css("width",""+j(d[c][1],g)+"px");a.css("height",""+j(d[c][2],n)+"px");a.css("margin-left",""+(d.vx?-d.vx:0)+"px");a.css("margin-top","0px");a.hide();e.append(a);m.append(e);h.append(m);currentDate=l.getYear()+"-"+l.getMonth()+"-"+l.getDay();currentDate!==o&&h.prepend(p(d.dateTaken));o=currentDate;a.bind("load",function(){i(this).fadeIn(400)});f.append(h);return parseInt(h.width())};return{setConfig:function(f,d){k[f]=d},showImages:function(f,
d){for(var e=f.width()-1,a=d.slice(),h=[];0<a.length;)h.push(q(e,a));for(var g in h)for(var c in h[g])r(f,h[g][c])}}}(jQuery);
/* 06-jquery.history.min.js */
window.JSON||(window.JSON={});
(function(){function c(b){return 10>b?"0"+b:b}function m(b){return f.lastIndex=0,f.test(b)?'"'+b.replace(f,function(b){var a=k[b];return"string"==typeof a?a:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function j(b,i){var a,c,f,k,g=h,e,d=i[b];d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(b));"function"==typeof n&&(d=n.call(i,b,d));switch(typeof d){case "string":return m(d);case "number":return isFinite(d)?String(d):"null";case "boolean":case "null":return String(d);case "object":if(!d)return"null";
h+=o;e=[];if("[object Array]"===Object.prototype.toString.apply(d)){k=d.length;for(a=0;a<k;a+=1)e[a]=j(a,d)||"null";return f=0===e.length?"[]":h?"[\n"+h+e.join(",\n"+h)+"\n"+g+"]":"["+e.join(",")+"]",h=g,f}if(n&&"object"==typeof n){k=n.length;for(a=0;a<k;a+=1)c=n[a],"string"==typeof c&&(f=j(c,d),f&&e.push(m(c)+(h?": ":":")+f))}else for(c in d)Object.hasOwnProperty.call(d,c)&&(f=j(c,d),f&&e.push(m(c)+(h?": ":":")+f));return f=0===e.length?"{}":h?"{\n"+h+e.join(",\n"+h)+"\n"+g+"}":"{"+e.join(",")+"}",
h=g,f}}"use strict";"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=window.JSON,i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,o,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!=typeof b.stringify&&(b.stringify=function(b,i,a){var c;o=h="";if("number"==typeof a)for(c=0;c<a;c+=1)o+=" ";else"string"==typeof a&&(o=a);n=i;if(!i||"function"==typeof i||"object"==typeof i&&"number"==typeof i.length)return j("",{"":b});throw Error("JSON.stringify");});"function"!=
typeof b.parse&&(b.parse=function(b,c){function a(b,i){var g,e,d=b[i];if(d&&"object"==typeof d)for(g in d)Object.hasOwnProperty.call(d,g)&&(e=a(d,g),void 0!==e?d[g]=e:delete d[g]);return c.call(b,i,d)}var f,b=String(b);i.lastIndex=0;i.test(b)&&(b=b.replace(i,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return f=eval("("+b+")"),"function"==typeof c?a({"":f},""):f;throw new SyntaxError("JSON.parse");})})();(function(c,m){var j=c.History=c.History||{},b=c.jQuery;if("undefined"!=typeof j.Adapter)throw Error("History.js Adapter has already been loaded...");j.Adapter={bind:function(i,c,h){b(i).bind(c,h)},trigger:function(c,f,h){b(c).trigger(f,h)},extractEventData:function(b,c,h){return c&&c.originalEvent&&c.originalEvent[b]||h&&h[b]||m},onDomLoad:function(c){b(c)}};"undefined"!=typeof j.init&&j.init()})(window);
(function(c){var m=c.document,j=c.setInterval||j,b=c.History=c.History||{};if("undefined"!=typeof b.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");b.initHtml4=function(){if("undefined"!=typeof b.initHtml4.initialized)return!1;b.initHtml4.initialized=!0;b.enabled=!0;b.savedHashes=[];b.isLastHash=function(c){var f=b.getHashByIndex(),h;return h=c===f,h};b.saveHash=function(c){return b.isLastHash(c)?!1:(b.savedHashes.push(c),!0)};b.getHashByIndex=function(b){return null};
b.discardedHashes={};b.discardedStates={};b.discardState=function(c,f,h){var j=b.getHashByState(c),k;return k={discardedState:c,backState:h,forwardState:f},b.discardedStates[j]=k,!0};b.discardHash=function(c,f,h){return b.discardedHashes[c]={discardedHash:c,backState:h,forwardState:f},!0};b.discardedState=function(c){var c=b.getHashByState(c),f;return f=b.discardedStates[c]||!1,f};b.discardedHash=function(c){return b.discardedHashes[c]||!1};b.recycleState=function(c){var f=b.getHashByState(c);return b.discardedState(c)&&
delete b.discardedStates[f],!0};b.emulated.hashChange&&(b.hashChangeInit=function(){b.checkerFunction=null;var i="",f,h,o;return b.isInternetExplorer()?(f=m.createElement("iframe"),f.setAttribute("id","historyjs-iframe"),f.style.display="none",m.body.appendChild(f),f.contentWindow.document.open(),f.contentWindow.document.close(),h="",o=!1,b.checkerFunction=function(){if(o)return!1;o=!0;var k=b.getHash()||"",j=b.unescapeHash(f.contentWindow.document.location.hash)||"";return k!==i?(i=k,j!==k&&(h=k,
f.contentWindow.document.open(),f.contentWindow.document.close(),f.contentWindow.document.location.hash=b.escapeHash(k)),b.Adapter.trigger(c,"hashchange")):j!==h&&(h=j,b.setHash(j,!1)),o=!1,!0}):b.checkerFunction=function(){var f=b.getHash();return f!==i&&(i=f,b.Adapter.trigger(c,"hashchange")),!0},b.intervalList.push(j(b.checkerFunction,b.options.hashChangeInterval)),!0},b.Adapter.onDomLoad(b.hashChangeInit));b.emulated.pushState&&(b.onHashChange=function(i){var i=b.getHashByUrl(i&&i.newURL||m.location.href),
f=null,h;return b.isLastHash(i)?(b.busy(!1),!1):(b.doubleCheckComplete(),b.saveHash(i),i&&b.isTraditionalAnchor(i)?(b.Adapter.trigger(c,"anchorchange"),b.busy(!1),!1):(f=b.extractState(b.getFullUrl(i||m.location.href,!1),!0),b.isLastSavedState(f)?(b.busy(!1),!1):(b.getHashByState(f),h=b.discardedState(f),h?(b.getHashByIndex(-2)===b.getHashByState(h.forwardState)?b.back(!1):b.forward(!1),!1):(b.pushState(f.data,f.title,f.url,!1),!0))))},b.Adapter.bind(c,"hashchange",b.onHashChange),b.pushState=function(i,
f,h,j){if(b.getHashByUrl(h))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==j&&b.busy())return b.pushQueue({scope:b,callback:b.pushState,args:arguments,queue:j}),!1;b.busy(!0);var k=b.createStateObject(i,f,h),n=b.getHashByState(k),l=b.getState(!1),l=b.getHashByState(l),q=b.getHash();return b.storeState(k),b.expectedStateId=k.id,b.recycleState(k),b.setTitle(k),n===l?(b.busy(!1),!1):n!==q&&n!==b.getShortUrl(m.location.href)?(b.setHash(n,!1),!1):
(b.saveState(k),b.Adapter.trigger(c,"statechange"),b.busy(!1),!0)},b.replaceState=function(c,f,h,j){if(b.getHashByUrl(h))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==j&&b.busy())return b.pushQueue({scope:b,callback:b.replaceState,args:arguments,queue:j}),!1;b.busy(!0);var k=b.createStateObject(c,f,h),m=b.getState(!1),l=b.getStateByIndex(-2);return b.discardState(m,k,l),b.pushState(k.data,k.title,k.url,!1),!0});b.emulated.pushState&&b.getHash()&&
!b.emulated.hashChange&&b.Adapter.onDomLoad(function(){b.Adapter.trigger(c,"hashchange")})};"undefined"!=typeof b.init&&b.init()})(window);
(function(c,m){var j=c.console||m,b=c.document,i=c.navigator,f=c.sessionStorage||!1,h=c.setTimeout,o=c.clearTimeout,k=c.setInterval,n=c.clearInterval,l=c.JSON,q=c.alert,a=c.History=c.History||{},p=c.history;l.stringify=l.stringify||l.encode;l.parse=l.parse||l.decode;if("undefined"!=typeof a.init)throw Error("History.js Core has already been loaded...");a.init=function(){return"undefined"==typeof a.Adapter?!1:("undefined"!=typeof a.initCore&&a.initCore(),"undefined"!=typeof a.initHtml4&&a.initHtml4(),
!0)};a.initCore=function(){if("undefined"!=typeof a.initCore.initialized)return!1;a.initCore.initialized=!0;a.options=a.options||{};a.options.hashChangeInterval=a.options.hashChangeInterval||100;a.options.safariPollInterval=a.options.safariPollInterval||500;a.options.doubleCheckInterval=a.options.doubleCheckInterval||500;a.options.storeInterval=a.options.storeInterval||1E3;a.options.busyDelay=a.options.busyDelay||250;a.options.debug=a.options.debug||!1;a.options.initialTitle=a.options.initialTitle||
b.title;a.intervalList=[];a.clearAllIntervals=function(){var g,b=a.intervalList;if("undefined"!=typeof b&&null!==b){for(g=0;g<b.length;g++)n(b[g]);a.intervalList=null}};a.debug=function(){a.options.debug&&a.log.apply(a,arguments)};a.log=function(){var a="undefined"!=typeof j&&"undefined"!=typeof j.log&&"undefined"!=typeof j.log.apply,e=b.getElementById("log"),d,c,f,h;a?(c=Array.prototype.slice.call(arguments),d=c.shift(),"undefined"!=typeof j.debug?j.debug.apply(j,[d,c]):j.log.apply(j,[d,c])):d="\njmathai\n";
c=1;for(f=arguments.length;c<f;++c){h=arguments[c];if("object"==typeof h&&"undefined"!=typeof l)try{h=l.stringify(h)}catch(i){}d+="\n"+h+"\n"}return e?(e.value+=d+"\n-----\n",e.scrollTop=e.scrollHeight-e.clientHeight):a||q(d),!0};a.getInternetExplorerMajorVersion=function(){var g=a.getInternetExplorerMajorVersion,e;if("undefined"!=typeof a.getInternetExplorerMajorVersion.cached)e=a.getInternetExplorerMajorVersion.cached;else{e=3;for(var d=b.createElement("div"),c=d.getElementsByTagName("i");(d.innerHTML=
"<\!--[if gt IE "+ ++e+"]><i></i><![endif]--\>")&&c[0];);e=4<e?e:!1}return g.cached=e};a.isInternetExplorer=function(){return a.isInternetExplorer.cached="undefined"!=typeof a.isInternetExplorer.cached?a.isInternetExplorer.cached:Boolean(a.getInternetExplorerMajorVersion())};a.emulated={pushState:!Boolean(c.history&&c.history.pushState&&c.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in
c||"onhashchange"in b)||a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion())};a.enabled=!a.emulated.pushState;a.bugs={setHash:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion()),hashEscape:Boolean(a.isInternetExplorer()&&
7>a.getInternetExplorerMajorVersion())};a.isEmptyObject=function(a){for(var b in a)return!1;return!0};a.cloneObject=function(a){var b,d;return a?(b=l.stringify(a),d=l.parse(b)):d={},d};a.getRootUrl=function(){var a=b.location.protocol+"//"+(b.location.hostname||b.location.host);b.location.port&&(a+=":"+b.location.port);return a+="/",a};a.getBaseHref=function(){var a=b.getElementsByTagName("base"),e="";return 1===a.length&&(e=null.href.replace(/[^\/]+$/,"")),e=e.replace(/\/+$/,""),e&&(e+="/"),e};a.getBaseUrl=
function(){return a.getBaseHref()||a.getBasePageUrl()||a.getRootUrl()};a.getPageUrl=function(){var g;return g=((a.getState(!1,!1)||{}).url||b.location.href).replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"}),g};a.getBasePageUrl=function(){return b.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};a.getFullUrl=function(g,b){var d=g,c=g.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(g)||
("/"===c?d=a.getRootUrl()+g.replace(/^\/+/,""):"#"===c?d=a.getPageUrl().replace(/#.*/,"")+g:"?"===c?d=a.getPageUrl().replace(/[\?#].*/,"")+g:b?d=a.getBaseUrl()+g.replace(/^(\.\/)+/,""):d=a.getBasePageUrl()+g.replace(/^(\.\/)+/,"")),d.replace(/\#$/,"")};a.getShortUrl=function(g){var b=a.getBaseUrl(),d=a.getRootUrl();return a.emulated.pushState&&(g=g.replace(b,"")),g=g.replace(d,"/"),a.isTraditionalAnchor(g)&&(g="./"+g),g=g.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),g};a.store={};a.idToState=a.idToState||
{};a.stateToId=a.stateToId||{};a.urlToId=a.urlToId||{};a.storedStates=a.storedStates||[];a.savedStates=a.savedStates||[];a.normalizeStore=function(){a.store.idToState=a.store.idToState||{};a.store.urlToId=a.store.urlToId||{};a.store.stateToId=a.store.stateToId||{}};a.getState=function(g,b){"undefined"==typeof g&&(g=!0);"undefined"==typeof b&&(b=!0);var d=a.getLastSavedState();return!d&&b&&(d=a.createStateObject()),g&&(d=a.cloneObject(d),d.url=d.cleanUrl||d.url),d};a.getIdByState=function(b){var e=
a.extractId(b.url),d;if(!e)if(d=a.getStateString(b),"undefined"!=typeof a.stateToId[d])e=a.stateToId[d];else if("undefined"!=typeof a.store.stateToId[d])e=a.store.stateToId[d];else{for(;!(e=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof a.idToState[e]&&"undefined"==typeof a.store.idToState[e]););a.stateToId[d]=e;a.idToState[e]=b}return e};a.normalizeState=function(g){var e;if(!g||"object"!=typeof g)g={};if("undefined"!=typeof g.normalized)return g;if(!g.data||"object"!=
typeof g.data)g.data={};e={normalized:!0};e.title=g.title||"";e.url=a.getFullUrl(a.unescapeString(g.url||b.location.href));e.hash=a.getShortUrl(e.url);e.data=a.cloneObject(g.data);e.id=a.getIdByState(e);e.cleanUrl=e.url.replace(/\??\&_suid.*/,"");e.url=e.cleanUrl;g=!a.isEmptyObject(e.data);if(e.title||g)e.hash=a.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id;return e.hashedUrl=a.getFullUrl(e.hash),(a.emulated.pushState||a.bugs.safariPoll)&&a.hasUrlDuplicate(e)&&
(e.url=e.hashedUrl),e};a.createStateObject=function(b,e,d){b={data:b,title:e,url:d};return b=a.normalizeState(b),b};a.getStateById=function(b){b=String(b);return a.idToState[b]||a.store.idToState[b]||m};a.getStateString=function(b){var e,d,c;return e=a.normalizeState(b),d={data:e.data,title:b.title,url:b.url},c=l.stringify(d),c};a.getStateId=function(b){var e,d;return e=a.normalizeState(b),d=e.id,d};a.getHashByState=function(b){var e,d;return e=a.normalizeState(b),d=e.hash,d};a.extractId=function(a){var b,
d;return d=/(.*)\&_suid=([0-9]+)$/.exec(a),b=d?String(d[2]||""):"",b||!1};a.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};a.extractState=function(b,e){var d=null,c,f;return e=e||!1,c=a.extractId(b),c&&(d=a.getStateById(c)),d||(f=a.getFullUrl(b),c=a.getIdByUrl(f)||!1,c&&(d=a.getStateById(c)),!d&&e&&!a.isTraditionalAnchor(b)&&(d=a.createStateObject(null,null,f))),d};a.getIdByUrl=function(b){return a.urlToId[b]||a.store.urlToId[b]||m};a.getLastSavedState=function(){return a.savedStates[a.savedStates.length-
1]||m};a.getLastStoredState=function(){return a.storedStates[a.storedStates.length-1]||m};a.hasUrlDuplicate=function(b){var e=!1,d;return d=a.extractState(b.url),e=d&&d.id!==b.id,e};a.storeState=function(b){return a.urlToId[b.url]=b.id,a.storedStates.push(a.cloneObject(b)),b};a.isLastSavedState=function(){return a.savedStates.length&&a.getLastSavedState(),!1};a.saveState=function(b){return a.isLastSavedState(b)?!1:(a.savedStates.push(a.cloneObject(b)),!0)};a.getStateByIndex=function(a){return null};
a.getHash=function(){return a.unescapeHash(b.location.hash)};a.unescapeString=function(a){for(var b;;){b=c.unescape(a);if(b===a)break;a=b}return a};a.unescapeHash=function(b){b=a.normalizeHash(b);return b=a.unescapeString(b),b};a.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};a.setHash=function(g,e){var d,c,f;return!1!==e&&a.busy()?(a.pushQueue({scope:a,callback:a.setHash,args:arguments,queue:e}),!1):(d=a.escapeHash(g),a.busy(!0),c=a.extractState(g,!0),c&&!a.emulated.pushState?
a.pushState(c.data,c.title,c.url,!1):b.location.hash!==d&&(a.bugs.setHash?(f=a.getPageUrl(),a.pushState(null,null,f+"#"+d,!1)):b.location.hash=d),a)};a.escapeHash=function(b){b=a.normalizeHash(b);return b=c.escape(b),a.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),b};a.getHashByUrl=function(b){b=String(b).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=a.unescapeHash(b),b};a.setTitle=function(c){var e=c.title,d;e||(d=a.getStateByIndex(0),
d&&d.url===c.url&&(e=d.title||a.options.initialTitle));try{b.getElementsByTagName("title")[0].innerHTML=e.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(f){}return b.title=e,a};a.queues=[];a.busy=function(b){"undefined"!=typeof b?a.busy.flag=b:"undefined"==typeof a.busy.flag&&(a.busy.flag=!1);if(!a.busy.flag){o(a.busy.timeout);var c=function(){var b,g;if(!a.busy.flag)for(b=a.queues.length-1;0<=b;--b)g=a.queues[b],0!==g.length&&(g=g.shift(),a.fireQueueItem(g),a.busy.timeout=
h(c,a.options.busyDelay))};a.busy.timeout=h(c,a.options.busyDelay)}return a.busy.flag};a.busy.flag=!1;a.fireQueueItem=function(b){return b.callback.apply(b.scope||a,b.args||[])};a.pushQueue=function(b){return a.queues[b.queue||0]=a.queues[b.queue||0]||[],a.queues[b.queue||0].push(b),a};a.queue=function(b,c){return"function"==typeof b&&(b={callback:b}),"undefined"!=typeof c&&(b.queue=c),a.busy()?a.pushQueue(b):a.fireQueueItem(b),a};a.clearQueue=function(){return a.busy.flag=!1,a.queues=[],a};a.stateChanged=
!1;a.doubleChecker=!1;a.doubleCheckComplete=function(){return a.stateChanged=!0,a.doubleCheckClear(),a};a.doubleCheckClear=function(){return a.doubleChecker&&(o(a.doubleChecker),a.doubleChecker=!1),a};a.doubleCheck=function(b){return a.stateChanged=!1,a.doubleCheckClear(),a.bugs.ieDoubleCheck&&(a.doubleChecker=h(function(){return a.doubleCheckClear(),a.stateChanged||b(),!0},a.options.doubleCheckInterval)),a};a.safariStatePoll=function(){var g=a.extractState(b.location.href);if(!a.isLastSavedState(g))return g||
a.createStateObject(),a.Adapter.trigger(c,"popstate"),a};a.back=function(b){return!1!==b&&a.busy()?(a.pushQueue({scope:a,callback:a.back,args:arguments,queue:b}),!1):(a.busy(!0),a.doubleCheck(function(){a.back(!1)}),p.go(-1),!0)};a.forward=function(b){return!1!==b&&a.busy()?(a.pushQueue({scope:a,callback:a.forward,args:arguments,queue:b}),!1):(a.busy(!0),a.doubleCheck(function(){a.forward(!1)}),p.go(1),!0)};a.go=function(b,c){var d;if(0<b)for(d=1;d<=b;++d)a.forward(c);else{if(!(0>b))throw Error("History.go: History.go requires a positive or negative integer passed.");
for(d=-1;d>=b;--d)a.back(c)}return a};if(a.emulated.pushState){var r=function(){};a.pushState=a.pushState||r;a.replaceState=a.replaceState||r}else a.onPopState=function(g,e){var d=!1,f=!1,h,i;return a.doubleCheckComplete(),h=a.getHash(),h?(i=a.extractState(h||b.location.href,!0),i?a.replaceState(i.data,i.title,i.url,!1):(a.Adapter.trigger(c,"anchorchange"),a.busy(!1)),a.expectedStateId=!1,!1):(d=a.Adapter.extractEventData("state",g,e)||!1,d?f=a.getStateById(d):a.expectedStateId?f=a.getStateById(a.expectedStateId):
f=a.extractState(b.location.href),f||(f=a.createStateObject(null,null,b.location.href)),a.expectedStateId=!1,a.isLastSavedState(f)?(a.busy(!1),!1):(a.storeState(f),a.saveState(f),a.setTitle(f),a.Adapter.trigger(c,"statechange"),a.busy(!1),!0))},a.Adapter.bind(c,"popstate",a.onPopState),a.pushState=function(b,e,d,f){if(a.getHashByUrl(d)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&a.busy())return a.pushQueue({scope:a,
callback:a.pushState,args:arguments,queue:f}),!1;a.busy(!0);var h=a.createStateObject(b,e,d);return a.isLastSavedState(h)?a.busy(!1):(a.storeState(h),a.expectedStateId=h.id,p.pushState(h.id,h.title,h.url),a.Adapter.trigger(c,"popstate")),!0},a.replaceState=function(b,e,d,f){if(a.getHashByUrl(d)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:f}),
!1;a.busy(!0);var h=a.createStateObject(b,e,d);return a.isLastSavedState(h)?a.busy(!1):(a.storeState(h),a.expectedStateId=h.id,p.replaceState(h.id,h.title,h.url),a.Adapter.trigger(c,"popstate")),!0};if(f)try{a.store=l.parse(f.getItem("History.store"))||{}}catch(s){a.store={}}else a.store={};a.normalizeStore();a.Adapter.bind(c,"beforeunload",a.clearAllIntervals);a.Adapter.bind(c,"unload",a.clearAllIntervals);a.saveState(a.storeState(a.extractState(b.location.href,!0)));f&&(a.onUnload=function(){var b,
c;try{b=l.parse(f.getItem("History.store"))||{}}catch(d){b={}}b.idToState=b.idToState||{};b.urlToId=b.urlToId||{};b.stateToId=b.stateToId||{};for(c in a.idToState)a.idToState.hasOwnProperty(c)&&(b.idToState[c]=a.idToState[c]);for(c in a.urlToId)a.urlToId.hasOwnProperty(c)&&(b.urlToId[c]=a.urlToId[c]);for(c in a.stateToId)a.stateToId.hasOwnProperty(c)&&(b.stateToId[c]=a.stateToId[c]);a.store=b;a.normalizeStore();f.setItem("History.store",l.stringify(b))},a.intervalList.push(k(a.onUnload,a.options.storeInterval)),
a.Adapter.bind(c,"beforeunload",a.onUnload),a.Adapter.bind(c,"unload",a.onUnload));if(!a.emulated.pushState&&(a.bugs.safariPoll&&a.intervalList.push(k(a.safariStatePoll,a.options.safariPollInterval)),"Apple Computer, Inc."===i.vendor||"Mozilla"===(i.appCodeName||"")))a.Adapter.bind(c,"hashchange",function(){a.Adapter.trigger(c,"popstate")}),a.getHash()&&a.Adapter.onDomLoad(function(){a.Adapter.trigger(c,"hashchange")})};a.init()})(window);
/* 07-jquery.scrollTo.min.js */
(function(c){function h(b){return"object"==typeof b?b:{top:b,left:b}}var l=c.scrollTo=function(b,d,a){c(window).scrollTo(b,d,a)};l.defaults={axis:"xy",duration:1.3<=parseFloat(c.fn.jquery)?0:1};l.window=function(){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==c.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return c.browser.safari||
"BackCompat"==b.compatMode?b.body:b.documentElement})};c.fn.scrollTo=function(b,d,a){"object"==typeof d&&(a=d,d=0);"function"==typeof a&&(a={onAfter:a});"max"==b&&(b=9E9);a=c.extend({},l.defaults,a);d=d||a.speed||a.duration;a.queue=a.queue&&1<a.axis.length;a.queue&&(d/=2);a.offset=h(a.offset);a.over=h(a.over);return this._scrollable().each(function(){function n(c){i.animate(e,d,a.easing,c&&function(){c.call(this,b,a)})}var j=this,i=c(j),g=b,m,e={},p=i.is("html,body");switch(typeof g){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(g)){g=
h(g);break}g=c(g,this);case "object":if(g.is||g.style)m=(g=c(g)).offset()}c.each(a.axis.split(""),function(b,c){var d=c=="x"?"Left":"Top",k=d.toLowerCase(),f="scroll"+d,h=j[f],o=l.max(j,c);if(m){e[f]=m[k]+(p?0:h-i.offset()[k]);if(a.margin){e[f]=e[f]-(parseInt(g.css("margin"+d))||0);e[f]=e[f]-(parseInt(g.css("border"+d+"Width"))||0)}e[f]=e[f]+(a.offset[k]||0);a.over[k]&&(e[f]=e[f]+g[c=="x"?"width":"height"]()*a.over[k])}else{d=g[k];e[f]=d.slice&&d.slice(-1)=="%"?parseFloat(d)/100*o:d}/^\d+$/.test(e[f])&&
(e[f]=e[f]<=0?0:Math.min(e[f],o));if(!b&&a.queue){h!=e[f]&&n(a.onAfterFirst);delete e[f]}});n(a.onAfter)}).end()};l.max=function(b,d){var a="x"==d?"Width":"Height",h="scroll"+a;if(!c(b).is("html,body"))return b[h]-c(b)[a.toLowerCase()]();var a="client"+a,j=b.ownerDocument.documentElement,i=b.ownerDocument.body;return Math.max(j[h],i[h])-Math.min(j[a],i[a])}})(jQuery);
/* 08-openphoto-theme.min.js */
var opTheme=function(){var g,j,e,f,l,k,m=null;g={get:function(){return m},set:function(a){m=a}};j=function(a){"undefined"!==typeof console&&"undefined"!==typeof console.log&&console.log(a)};e={message:function(a){var b="";1<arguments.length&&("error"==arguments[1]?b="error":"confirm"==arguments[1]&&(b="success"));return'<div class="alert-message block-message '+b+'"><a class="modal-close-click close" href="#">x</a>'+a+"</div>"},modal:function(a,b,c){return'<div class="modal-header">  <a href="#" class="close" data-dismiss="modal">&times;</a>  <h3>'+
a+'</h3></div><div class="modal-body">  <p>'+b+"</p></div>"+(c?'<div class="modal-footer">'+c+"</div>":"")}};f={clickHandler:function(a){var b=$(a.currentTarget).attr("href");if(History.enabled&&-1==b.search("#")&&(null===b.match(/^http/)||-1!=b.search(document.location.hostname)))a.preventDefault(),get(b)},get:function(a){f.url=a;$.get(f.url,f.store)},replace:function(a,b){var c=b||{};c.type="replace";History.replaceState(c,"",a)},insert:function(a,b){var c=b||{};c.type="insert";History.pushState(c,
"",a)},parse:function(a){var b=$(a),a=$("body",b).attr("class"),b=$(".content",b).html();return{bodyClass:a,content:b}},render:function(a){"replace"===a.type?$(".modal").modal("hide"):void 0!==a.content&&$("undefined"===typeof a.bodyClass||"photo-details"===a.bodyClass?"#modal-photo-detail":".content").fadeTo("fast",0.25,function(){$(this).html(a.content).fadeTo("fast",1)})},store:function(a){a=f.parse(a||{});a.type="store";History.pushState(a,"",f.url)}};k={getDeviceWidth:function(){return $(window).width()},
fetchAndCache:function(a){$("<img />").attr("src",a).appendTo("body").css("display","none").on("load",function(a){$(a.target).remove()})},fetchAndCacheNextPrevious:function(){var a=$("img.next-photo"),b=$("img.previous-photo");0<b.length&&OP.Util.fire("preload:photo",{id:b.attr("data-id"),sizes:"870x550"});0<a.length&&OP.Util.fire("preload:photo",{id:a.attr("data-id"),sizes:"870x550"})}};return{callback:{actionDelete:function(a){a.preventDefault();var a=$(a.target),b=a.attr("href")+".json",c=a.attr("data-id");
OP.Util.makeRequest(b,a.parent().serializeArray(),function(a){204===a.code?$(".action-container-"+c).hide("medium",function(){$(this).remove()}):opTheme.message.error("Could not delete the photo.")});return!1},actionPost:function(a){a.preventDefault();var b=$("#favorite-form"),a=b.attr("action")+".json",b=b.serialize();$.ajax({url:a,type:"POST",data:b,dataType:"json",success:function(a){location.href=201===a.code?location.pathname+"?c=favorited":location.pathname+"?e=unknown"}})},albumDelete:function(a){a.preventDefault();
var b=$(a.target),a=b.attr("href")+".json",c=b.parent(),b={crumb:g.get()};OP.Util.makeRequest(a,b,function(a){204===a.code?c.slideUp("medium",function(){this.remove()}):opTheme.message.error("We could not delete this group.")})},albumForm:function(a){a.preventDefault();a=$(a.target).attr("href")+".json";OP.Util.makeRequest(a,{modal:"true",dynamic:"true"},function(a){if(200===a.code){var c=$("#modal"),a=e.modal("Create an album",a.result.markup,null);c.html(a).modal();$(".typeahead",c).chosen()}else opTheme.message.error("Could not load the form to create an album.")},
"json","get");return!1},albumPost:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json",c=-1<b.search("create"),d=parseInt($('input[name="dynamic"]',a).val()),h={};h.name=$('input[name="name"]',a).val();h.visible=$('input[name="visible"]:checked',a).val();h.crumb=g.get();0==h.name.length?opTheme.message.error("Please enter a name for your album."):OP.Util.makeRequest(b,h,function(a){var b;200===a.code||201===a.code?d?opTheme.callback.albumPostDynamicCb(b,a.result):c?location.href=
"/manage/albums?m=album-created&rand="+parseInt(1E5*Math.random())+"#album-"+a.result.id:opTheme.message.confirm("Album updated successfully."):opTheme.message.error("Could not update album.")})},albumPostDynamicCb:function(a,b){var c=$('select[name="albums"]',a);$(".modal").modal("hide");$('<option value="'+b.id+'" selected="selected">'+b.name+"</option>").prependTo(c);c.trigger("liszt:updated")},batchAdd:function(a){$(".pin.photo-"+a.id).addClass("revealed pinned");opTheme.ui.batchMessage();j("Adding photo "+
a.id)},batchClear:function(){$(".pin.pinned").removeClass("revealed pinned");opTheme.ui.batchMessage()},batchField:function(a){var a=$(a.target).val(),b=$("form#batch-edit .form-fields");switch(a){case "albumsAdd":b.html(opTheme.ui.batchFormFields.albums());$("select",b).chosen();break;case "delete":b.html(opTheme.ui.batchFormFields.empty());break;case "groups":b.html(opTheme.ui.batchFormFields.groups());$("select",b).chosen();break;case "permission":b.html(opTheme.ui.batchFormFields.permission());
break;case "tagsAdd":case "tagsRemove":b.html(opTheme.ui.batchFormFields.tags())}},batchModal:function(){var a=$("#modal"),b=e.modal("Batch edit your pinned photos",'<form id="batch-edit">  <div class="clearfix">    <label>What would you like to do?</label>    <div class="input">      <select id="batch-key" class="batch-field-change" name="property">        <option value="tagsAdd">Add Tags</option>        <option value="tagsRemove">Remove Tags</option>        <option value="albumsAdd">Add Albums</option>        <option value="groups">Update Groups</option>        <option value="permission">Update Permissions</option>        <option value="delete">Delete</option>      </select>    </div>  </div>  <div class="form-fields">'+
opTheme.ui.batchFormFields.tags()+"</div></form>",'<a href="#" class="btn photo-update-batch-click">Submit</a>');a.html(b).modal()},batchRemove:function(a){$(".pin.photo-"+a).removeClass("pinned revealed");opTheme.ui.batchMessage();j("Removing photo "+a)},commentJump:function(a){a.preventDefault();$.scrollTo($("div.comment-form"),200);return!1},credentialView:function(a){a.preventDefault();a=$(a.target).attr("href")+".json";OP.Util.makeRequest(a,{},function(a){if(200===a.code){var c=$("#modal"),a=
e.modal(a.result.name,'<div class="clearfix">  <label>Consumer Key</label>  <p>'+a.result.id+"</p>  <label>Consumer Secret</label>  <p>"+a.result.clientSecret+"</p>  <label>Access Token</label>  <p>"+a.result.userToken+"</p>  <label>Access Token Secret</label>  <p>"+a.result.userSecret+"</p></div>",'<a href="#" class="btn" data-dismiss="modal">OK</a>');c.html(a).modal()}else opTheme.message.error("Could not load Application crendentials.")},"json","get");return!1},credentialDelete:function(a){a.preventDefault();
var b=$(a.target),a=b.attr("href")+".json",c={crumb:g.get()};OP.Util.makeRequest(a,c,function(a){204===a.code?(b.parent().parent().slideUp("medium",function(){this.remove()}),opTheme.message.confirm("Application successfully deleted.")):opTheme.message.error("Could not delete Application.")});return!1},featuresPost:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json",c={},c={crumb:g.get()};c.allowDuplicate=$('input[name="allowDuplicate"]:checked',a).length;c.downloadOriginal=
$('input[name="downloadOriginal"]:checked',a).length;c.hideFromSearchEngines=$('input[name="hideFromSearchEngines"]:checked',a).length;OP.Util.makeRequest(b,c,opTheme.callback.featuresPostCb)},featuresPostCb:function(a){200===a.code?opTheme.message.confirm("Your features were successfully saved."):opTheme.message.error("We could not save your features.")},groupDelete:function(a){a.preventDefault();var b=$(a.target),a=b.attr("href")+".json",c=b.parent(),b={crumb:g.get()};OP.Util.makeRequest(a,b,function(a){204===
a.code?c.slideUp("medium",function(){this.remove()}):opTheme.message.error("We could not delete this group.")})},groupEmailAdd:function(a){a.preventDefault();var a=$(a.target).prev(),b=$("ul.group-emails-add-list",a.parent()),c=a.val();""!==c&&($('<li><span class="group-email-queue">'+c+'</span> <a href="#" class="group-email-remove-click"><i class="group-email-remove-click icon-minus-sign"></i></a></li>').prependTo(b),a.val(""))},groupEmailRemove:function(a){a.preventDefault();var a=$(a.target).parent().parent(),
b=a.closest("form");a.remove();b.submit()},groupForm:function(a){a.preventDefault();a=$(a.target).attr("href")+".json";OP.Util.makeRequest(a,{modal:"true",dynamic:"true"},function(a){if(200===a.code){var c=$("#modal"),a=e.modal("Create a group",a.result.markup,null);c.html(a).modal()}else opTheme.message.error("Could not load the form to create an album.")},"json","get");return!1},groupPost:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json",c=-1<b.search("create"),d="1"==
$('input[name="dynamic"]',a).val(),h,e={name:$('input[name="name"]',a).val()};e.crumb=g.get();$(".group-email-add-click",a).trigger("click");h=[];$("span.group-email-queue",a).each(function(a,b){h.push($(b).html())});e.members=h.join(",");OP.Util.makeRequest(b,e,function(a){var b;200===a.code||201===a.code?d?opTheme.callback.groupPostDynamicCb(b,a.result):c?window.location.href="/manage/groups?m=group-created&rnd="+Math.random()+"#group-"+a.result.id:opTheme.message.confirm("Group updated successfully."):
opTheme.message.error("Could not update group.")})},groupPostDynamicCb:function(a,b){var c=$('select[name="groups"]',a);$(".modal").modal("hide");$('<option value="'+b.id+'" selected="selected">'+b.name+"</option>").prependTo(c);c.trigger("liszt:updated")},keyBrowseNext:function(a){!a.ctrlKey&&(!a.altKey&&!a.metaKey)&&$("img.next-photo").click()},keyBrowsePrevious:function(a){!a.ctrlKey&&(!a.altKey&&!a.metaKey)&&$("img.previous-photo").click()},login:function(a){a.preventDefault();a=$(a.target);a.hasClass("browserid")?
navigator.id.getVerifiedEmail(function(a){a?opTheme.user.browserid.loginSuccess(a):opTheme.user.browserid.loginFailure(a)}):a.hasClass("facebook")&&FB.login(function(a){a.authResponse?(j("User logged in, posting to openphoto host."),OP.Util.makeRequest("/user/facebook/login.json",opTheme.user.base.loginProcessed)):j("User cancelled login or did not fully authorize.")},{scope:"email"});return!1},loginModal:function(a){a.preventDefault();$("#loginBox").modal()},loginOpenPhoto:function(a){a.preventDefault();
var a=$(a.target),b=a.serialize();$.ajax({url:"/user/openphoto/login.json",dataType:"json",data:b+"&httpCodes=403",type:"POST",success:opTheme.user.base.loginProcessed,error:opTheme.callback.loginOpenPhotoFailedCb,context:a});return!1},loginOpenPhotoFailedCb:function(){$(this).find(".control-group").each(function(a,b){$(b).addClass("error")})},modalClose:function(a){a.preventDefault();$(a.target).parent().parent().slideUp("fast",function(){$(this).remove()})},modalShown:function(a){a=$('input[type="text"]',
a.target);0<a.length&&a[0].focus()},modalUnload:function(a){a.preventDefault();$("#modal-photo-detail").html("");f.replace(l)},passwordRequest:function(a){a.preventDefault();a=$(a.target).parent();a=$("#login-email",a).val();OP.Util.makeRequest("/user/password/request.json",{email:a},opTheme.callback.passwordRequestCb)},passwordRequestCb:function(a){$("#loginBox").modal("hide");a.result?opTheme.message.confirm("An email has been sent with a link to reset your password."):opTheme.message.error("We were unable to send you a password request. Make sure you entered your email address correctly and that you are the owner of this site.")},
passwordReset:function(a){a.preventDefault();var a=$(a.target).parent(),b=a.serializeArray();$(".input-password",a).val()!=$(".input-password-confirm",a).val()?opTheme.message.error("Your passwords did not match."):OP.Util.makeRequest("/user/password/reset.json",b,opTheme.callback.passwordResetCb)},passwordResetCb:function(a){a.result?opTheme.message.confirm("Your password was updated successfully. You can now log in to your site."):opTheme.message.error("We were unable to update your password. Try requesting a new reset link.")},
photoDelete:function(a){a.preventDefault();var b=$(a.target),a=b.parent().attr("action")+".json";OP.Util.makeRequest(a,b.parent().serializeArray(),function(a){204===a.code?(b.html("This photo has been deleted"),opTheme.message.confirm("This photo has been deleted.")):opTheme.message.error("Could not delete the photo.")});return!1},photoEdit:function(a){a.preventDefault();a="/photo/"+$(a.target).attr("data-id")+"/edit.json";OP.Util.makeRequest(a,{},function(a){if(200===a.code){var c=$("#modal"),a=
e.modal("Edit this photo",a.result.markup,null);c.html(a).modal();$(".typeahead",c).chosen()}else opTheme.message.error("Could not load the form to edit this photo.")},"json","get");return!1},photoView:function(a){a.preventDefault();a=$(a.target).parent();$(".photo-view");var b=a.attr("href"),a=b;if($("body").hasClass("photo-details"))location.href=b;else{var c=$("#modal-photo-detail");$("#modal-photo-detail .photo-view");a=-1===a.indexOf("?")?a+"?modal=true":a+"&modal=true";c.load(a+" .photo-view",
function(a){$("img.next-photo");$("img.previous-photo");f.insert(b,f.parse(a));k.fetchAndCacheNextPrevious();OP.Util.fire("photo:viewed",{url:location.href})})}return!1},photoViewModal:function(a){if(!(900>k.getDeviceWidth())){a.preventDefault();a=$(a.target).parent();$(".photo-view");var b=a=a.attr("href"),c=$("#modal-photo-detail"),b=-1===b.indexOf("?")?b+"?modal=true":b+"&modal=true";location.hash=a;c.load(b+" .photo-view",opTheme.callback.photoViewModalCb).modal().on("hidden",opTheme.callback.modalUnload);
return!1}},photoViewModalCb:function(a){k.fetchAndCacheNextPrevious();f.insert(location.hash,f.parse(a));OP.Util.fire("photo:viewed",{url:location.href})},photoUpdate:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json",c=a.serialize();0===$('select[name^="groups"] option:checked',a).length&&(c+="&groups=");0===$('select[name^="albums"] option:checked',a).length&&(c+="&albums=");OP.Util.makeRequest(b,c,opTheme.callback.photoUpdateCb,"json","post")},photoUpdateBatch:function(a){a.preventDefault();
var b=$(a.target),a=$("#batch-key").val(),c=$("form#batch-edit").find("*[name='value']"),d;b.html("Submitting...").attr("disabled","disabled");1==c.length?d=c.val():(b=$("form#batch-edit").find("*[name='value']:checked"),1==b.length?d=b.val():(d=[],b.each(function(a,b){d.push($(b).val())}),d=d.join(",")));b={crumb:g.get()};b[a]=d;b.ids=OP.Batch.collection.getIds().join(",");"delete"!==a?OP.Util.makeRequest("/photos/update.json",b,opTheme.callback.photoUpdateBatchCb,"json","post"):OP.Util.makeRequest("/photos/delete.json",
b,opTheme.callback.photoUpdateBatchCb,"json","post")},photoUpdateBatchCb:function(a){200==a.code?opTheme.message.append(e.message("Your photos were successfully updated.","confirm")):204==a.code?(OP.Batch.clear(),opTheme.message.append(e.message("Your photos were successfully deleted.","confirm"))):opTheme.message.append(e.message("There was a problem updating your photos.","error"));$("#modal").modal("hide")},photoUpdateCb:function(a){200===a.code?opTheme.message.confirm("Your photo was successfully updated."):
opTheme.message.error("We could not update your photo.");$("#modal").modal("hide")},photoUpload:function(a){a.preventDefault();a=$(a.target);a.attr("action");a.serialize()},photosViewMore:function(a){a.preventDefault();opTheme.init.pages.photos.load()},pinClick:function(a){var a=$(a.target),b=a.attr("data-id");a.hasClass("pinned")?OP.Batch.remove(b):OP.Batch.add(b)},pinClearClick:function(a){a.preventDefault();OP.Batch.clear()},pinSelectAll:function(a){a.preventDefault();$(".pin").each(function(){id=
$(this).attr("data-id");container=$(this).parent();container.hasClass("pinned")||OP.Batch.add(id)})},pluginView:function(a){a.preventDefault();var a=$(a.target).attr("href")+".json",b={crumb:g.get()},c=a.match(/\/plugin\/(.*)\/view.json$/);OP.Util.makeRequest("/plugin/"+c[1]+"/view.json",b,function(a){200===a.code?$("#modal").html(e.modal("Update "+c[1],a.result.markup,null)).modal():opTheme.message.error("Unable to load this plugin for editing.")},"json","get")},pluginStatusToggle:function(a){a.preventDefault();
var b=$(a.target),a=b.attr("href")+".json",c={crumb:g.get()};OP.Util.makeRequest(a,c,function(a){var c=$(b).parent(),e=c.parent();200===a.code?($("div",e).removeClass("hide"),c.addClass("hide")):opTheme.message.error("Could not update the status of this plugin.")},"json","post");return!1},pluginUpdate:function(a){a.preventDefault();var a=$(a.target),b=a.attr("action")+".json";OP.Util.makeRequest(b,a.serializeArray(),function(a){200===a.code?opTheme.message.confirm("Your plugin was successfully updated."):
opTheme.message.error("Could not update the status of this plugin.");$("#modal").modal("hide")},"json","post");return!1},preloadPhoto:function(a){OP.Util.makeRequest("/photo/"+a.id+"/view.json",{returnSizes:a.sizes,generate:"true"},opTheme.callback.preloadPhotoCb,"json","get")},preloadPhotoCb:function(a){var b=a.result;if(200===a.code)for(i in b)b.hasOwnProperty(i)&&!0===/^path[0-9]/.test(i)&&k.fetchAndCache(b[i])},popup:function(a){a.preventDefault();var b=$(a.target),a=b.attr("data-width"),c=b.attr("data-height"),
b=b.attr("href");window.open(b,"openphoto","toolbar=0,menubar=0,location=1,directories=0,channelmode=0,width="+a+",height="+c)},searchByTags:function(a){a.preventDefault();var b=$(a.target),a=$("select[name=tags]",b).val().join(","),b=b.attr("action");0<a.length&&(location.href=0<b.search("/list")?b.replace("/list","")+"/tags-"+a+"/list":b+"?tags="+a);return!1},settings:function(){$("ul#settingsbar").slideToggle("medium");$("li#nav-signin").toggleClass("active");return!1},share:{facebook:function(a){a.preventDefault();
var a=$(a.target),b={method:"feed",display:"popup"};b.link=a.attr("data-link");b.picture=a.attr("data-picture");b.name=a.attr("data-name");b.description=a.attr("data-description");FB.ui(b,function(){window.close()})}},tagsInitialized:function(){var a=OP.Tag.getTags(),b="";if(null!==a&&0<a.length)for(i in a)b+='<option value="'+a[i]+'">'+a[i]+"</option>";$(".typeahead-tags").html(b).chosen()},uploadCompleteSuccess:function(a){a.crumb=g.get();$("form.upload").fadeOut("fast",function(){OP.Util.makeRequest("/photos/upload/confirm.json",
a,opTheme.callback.uploadConfirm,"json","post")})},uploadConfirm:function(a){$("body.upload .upload-container").fadeOut("fast",function(){$(".upload-confirm").fadeIn("fast")});$("body.upload .upload-confirm").html(a.result).show("fast")},uploaderReady:function(){$("form.upload");"object"===typeof OPU&&OPU.init();$("select.typeahead").chosen()},webhookDelete:function(a){a.preventDefault();var b=$(a.target),a=b.attr("href")+".json";OP.Util.makeRequest(a,{},function(a){204===a.code?(b.parent().remove(),
opTheme.message.confirm("Credential successfully deleted.")):opTheme.message.error("Could not delete credential.")});return!1}},init:{load:function(a){var b="state"in window.history&&null!==window.history.state,c=location.href;g.set(a);OP.Tag.init();l=location.pathname;History.Adapter.bind(window,"statechange",function(){var a=History.getState(),h=!b&&location.href==c;b=!0;h||f.render(a.data)});$(".dropdown-toggle").dropdown();$(".modal").on("shown",opTheme.callback.modalShown);"/"===location.pathname?
opTheme.init.pages.front():"/manage/photos"===location.pathname?opTheme.init.pages.manage.photos():0===location.pathname.search(/^\/photos(.*)\/list/)?opTheme.init.pages.photos.init():0===location.pathname.search(/^\/p\/[a-z0-9]+/)||0===location.pathname.search(/^\/photo\/[a-z0-9]+\/?(.*)\/view/)?opTheme.init.pages.photo.init():"/photos/upload"===location.pathname&&opTheme.init.pages.upload()},attach:function(){OP.Util.on("click:action-delete",opTheme.callback.actionDelete);OP.Util.on("click:action-jump",
opTheme.callback.commentJump);OP.Util.on("click:action-post",opTheme.callback.actionPost);OP.Util.on("click:album-delete",opTheme.callback.albumDelete);OP.Util.on("click:album-form",opTheme.callback.albumForm);OP.Util.on("click:batch-modal",opTheme.callback.batchModal);OP.Util.on("click:credential-view",opTheme.callback.credentialView);OP.Util.on("click:credential-delete",opTheme.callback.credentialDelete);OP.Util.on("click:group-delete",opTheme.callback.groupDelete);OP.Util.on("click:group-email-add",
opTheme.callback.groupEmailAdd);OP.Util.on("click:group-email-remove",opTheme.callback.groupEmailRemove);OP.Util.on("click:group-form",opTheme.callback.groupForm);OP.Util.on("click:login",opTheme.callback.login);OP.Util.on("click:login-modal",opTheme.callback.loginModal);OP.Util.on("click:manage-password-request",opTheme.callback.passwordRequest);OP.Util.on("click:manage-password-reset",opTheme.callback.passwordReset);OP.Util.on("click:modal-close",opTheme.callback.modalClose);OP.Util.on("click:nav-item",
opTheme.callback.searchBarToggle);OP.Util.on("click:photo-delete",opTheme.callback.photoDelete);OP.Util.on("click:photo-edit",opTheme.callback.photoEdit);OP.Util.on("click:photo-update-batch",opTheme.callback.photoUpdateBatch);OP.Util.on("click:photo-view",opTheme.callback.photoView);OP.Util.on("click:photo-view-modal",opTheme.callback.photoViewModal);OP.Util.on("click:photos-load-more",opTheme.callback.photosViewMore);OP.Util.on("click:plugin-view",opTheme.callback.pluginView);OP.Util.on("click:plugin-status-toggle",
opTheme.callback.pluginStatusToggle);OP.Util.on("click:pin",opTheme.callback.pinClick);OP.Util.on("click:pin-clear",opTheme.callback.pinClearClick);OP.Util.on("click:pin-select-all",opTheme.callback.pinSelectAll);OP.Util.on("click:popup",opTheme.callback.popup);OP.Util.on("click:settings",opTheme.callback.settings);OP.Util.on("click:share-facebook",opTheme.callback.share.facebook);OP.Util.on("click:webhook-delete",opTheme.callback.webhookDelete);OP.Util.on("submit:album-post",opTheme.callback.albumPost);
OP.Util.on("submit:features-post",opTheme.callback.featuresPost);OP.Util.on("submit:group-post",opTheme.callback.groupPost);OP.Util.on("submit:login-openphoto",opTheme.callback.loginOpenPhoto);OP.Util.on("submit:photo-update",opTheme.callback.photoUpdate);OP.Util.on("submit:plugin-update",opTheme.callback.pluginUpdate);OP.Util.on("submit:search",opTheme.callback.searchByTags);OP.Util.on("keydown:browse-next",opTheme.callback.keyBrowseNext);OP.Util.on("keydown:browse-previous",opTheme.callback.keyBrowsePrevious);
OP.Util.on("change:batch-field",opTheme.callback.batchField);OP.Util.on("callback:batch-add",opTheme.callback.batchAdd);OP.Util.on("callback:batch-remove",opTheme.callback.batchRemove);OP.Util.on("callback:batch-clear",opTheme.callback.batchClear);OP.Util.on("callback:tags-initialized",opTheme.callback.tagsInitialized);OP.Util.on("upload:complete-success",opTheme.callback.uploadCompleteSuccess);OP.Util.on("upload:complete-failure",opTheme.callback.uploadCompleteFailure);OP.Util.on("upload:uploader-ready",
opTheme.callback.uploaderReady);OP.Util.on("tags:autocomplete",opTheme.callback.tagsAutocomplete);OP.Util.on("preload:photo",opTheme.callback.preloadPhoto)},pages:{front:function(){$(".carousel.front").swipe({swipeLeft:function(){("undefined"===typeof newBG||"undefined"===newBG)&&$(".carousel").carousel("next")},swipeRight:function(){("undefined"===typeof newBG||"undefined"===newBG)&&$(".carousel").carousel("prev")},threshold:100});$(".carousel.front").carousel({interval:7E3});$(".carousel.front").on("slid",
function(){var a=$(".carousel.front .active"),a=parseInt(a.attr("data-index"))+1;$(".carouselthumbs .active").removeClass("active");$(".carouselthumbs li:nth-child("+a+") a").addClass("active")});$(".carousel.feed").carousel();$(".carousel.feed").carousel("pause")},manage:{photos:function(){var a=OP.Batch.collection.getAll(),b=OP.Batch.collection.getLength(),c=$(".pin"),d,h;0<b&&opTheme.ui.batchMessage();c.each(function(b,c){c=$(c);d=c.attr("class");h=d.match(/ photo-([a-z0-9]+)/);2==h.length&&void 0!==
a[h[1]]&&c.addClass("revealed pinned")})}},photo:{init:function(){k.fetchAndCacheNextPrevious();OP.Util.fire("photo:viewed",{url:location.href})}},photos:{initData:"undefined"===typeof initData?void 0:initData,filterOpts:"undefined"===typeof filterOpts?void 0:filterOpts,page:null,pageCount:0,pageLocation:window.location,maxMobilePageCount:5,end:!1,running:!1,init:function(){var a=opTheme.init.pages.photos;$(window).scroll(a.scrollCb);a.load()},scrollCb:function(){var a=opTheme.init.pages.photos;900>
k.getDeviceWidth()||$(window).scrollTop()>$(document).height()-$(window).height()-200&&a.load()},load:function(){var a=opTheme.init.pages.photos;loc=location;if("undefined"===typeof a.initData){if(!a.end&&!a.running){a.running=!0;if(null===a.page){var b=loc.href.match("page=([0-9]+)");null!==b?a.page=b[1]:(b=loc.pathname.match(/\/page-([0-9]+)/),null!==b&&(a.page=b[1]));null===a.page&&(a.page=1)}b=a.pageLocation.pathname+".json";params={};qs=a.pageLocation.search.replace("?","");if(0<qs.length){var c=
qs.split("&"),d;for(i in c)c.hasOwnProperty(i)&&(d=c[i].split("="),2===d.length&&(params[d[0]]=d[1]))}params.returnSizes="960x180";params.page=a.page;a.pageCount>a.maxMobilePageCount&&900>k.getDeviceWidth()?location.href=a.pageLocation.pathname+"?"+decodeURIComponent($.param(params)):$.getJSON(b,params,a.loadCb)}}else delete a.initData,a.page=1,a.loadCb({code:200,result:initData})},loadCb:function(a){var a=a.result,b=opTheme.init.pages.photos,c=$(".infobar"),d=$(".startdate",c),c=$(".enddate",c);
parseInt(d.attr("data-time"));var h=parseInt(c.attr("data-time")),e=opTheme.ui,g;if(a[0].totalPages>=b.page){var f;for(g=0;g<a.length;g++)f=parseInt(a[g].dateTaken),f>h?(e.fadeAndSet(c,phpjs.date("l F jS, Y",f)),c.attr("data-time",f),h=f):parseInt(a[g].dateTaken)<parseInt(d.attr("data-time"))&&(e.fadeAndSet(d,phpjs.date("l F jS, Y",f)),d.attr("data-time",f));Gallery.showImages($(".photo-grid-justify"),a);b.page++;b.pageCount++;b.running=!1}else $(".load-more").hide(),b.end=!0}},upload:function(){OP.Util.fire("upload:uploader-ready")}}},
message:{append:function(a,b){var c=$(".message:first").clone(!1),d=$(".message:last"),e=b||!1;c.addClass("alert alert-info").html(a);d.after(c).slideDown();e||c.delay(5E3).slideUp(function(){$(this).remove()})},confirm:function(a,b){opTheme.message.show(a,"confirm",b||!1)},error:function(a,b){opTheme.message.show(a,"error",b||!1)},show:function(a,b,c){opTheme.message.append(e.message(a,b),c||!1)}},ui:{batchFormFields:{albums:function(){var a,b="";$.ajax({url:"/albums/list.json",data:{pageSize:"0"},
async:!1,success:function(c){if(200===c.code){b+='<label>Select albums</label><select name="value" multiple>';for(i in c.result)c.result.hasOwnProperty(i)&&(a=c.result[i],b+='<option value="'+a.id+'">'+a.name+"</option>");b+="</select>"}}});return b},empty:function(){return""},groups:function(){var a,b="";$.ajax({url:"/groups/list.json",async:!1,success:function(c){if(200===c.code){b+='<label>Select groups</label><select name="value" multiple>';for(i in c.result)c.result.hasOwnProperty(i)&&(a=c.result[i],
b+='<option value="'+a.id+'">'+a.name+"</option>");b+="</select>"}}});return b},permission:function(){return'  <label class="radio">    <input type="radio" name="value" value="1" checked="checked">    Public  </label>  <label class="radio">    <input type="radio" name="value" value="0">     Private  </label>'},tags:function(){return'  <label>Tags</label>  <input type="text" name="value" class="tags-autocomplete" placeholder="A comma separated list of tags" value="">'}},batchMessage:function(){var a=
OP.Batch.collection.getLength();0<$("#batch-message").length&&0<a?$("#batch-count").html(a):0==a?$("#batch-message").parent().parent().slideUp("fast",function(){$(this).html("").removeClass()}):opTheme.message.append('<div class="batch-message-container">'+e.message('  <a id="batch-message"></a>You have <span id="batch-count">'+a+'</span> photos pinned.  <div><a class="btn small info batch-modal-click" data-controls-modal="modal" data-backdrop="static">Batch edit</a>&nbsp;<a href="#" class="btn small pin-clear-click">Or clear pins</a></div>')+
"</div>",!0)},fadeAndSet:function(a,b){var c=$(a);c.fadeOut("fast",function(){c.html(b).fadeIn("fast")})}},user:{base:{loginProcessed:function(a){200!=a.code?j("processing of login failed"):(j("login processing succeeded"),window.location.reload())}},browserid:{loginFailure:function(){j("login failed")},loginSuccess:function(a){OP.Util.makeRequest("/user/browserid/login.json",{assertion:a},opTheme.user.base.loginProcessed)}}}}}();
/* 09-phpjs.min.js */
var phpjs=function(){return{date:function(i,j){var d,a,g=/\\?([a-z])/gi,f,e=function(b,a){return(b+="").length<a?Array(++a-b.length).join("0")+b:b},h="Sun Mon Tues Wednes Thurs Fri Satur January February March April May June July August September October November December".split(" ");f=function(b,c){return a[b]?a[b]():c};a={d:function(){return e(a.j(),2)},D:function(){return a.l().slice(0,3)},j:function(){return d.getDate()},l:function(){return h[a.w()]+"day"},N:function(){return a.w()||7},S:function(){var b=
a.j();return 4>b|20<b&&["st","nd","rd"][b%10-1]||"th"},w:function(){return d.getDay()},z:function(){var b=new Date(a.Y(),a.n()-1,a.j()),c=new Date(a.Y(),0,1);return Math.round((b-c)/864E5)+1},W:function(){var b=new Date(a.Y(),a.n()-1,a.j()-a.N()+3),c=new Date(b.getFullYear(),0,4);return e(1+Math.round((b-c)/864E5/7),2)},F:function(){return h[6+a.n()]},m:function(){return e(a.n(),2)},M:function(){return a.F().slice(0,3)},n:function(){return d.getMonth()+1},t:function(){return(new Date(a.Y(),a.n(),
0)).getDate()},L:function(){var b=a.Y();return 0==b%4&0!=b%100|0==b%400},o:function(){var b=a.n(),c=a.W();return a.Y()+(12===b&&9>c?-1:1===b&&9<c)},Y:function(){return d.getFullYear()},y:function(){return(a.Y()+"").slice(-2)},a:function(){return 11<d.getHours()?"pm":"am"},A:function(){return a.a().toUpperCase()},B:function(){var a=3600*d.getUTCHours(),c=60*d.getUTCMinutes(),f=d.getUTCSeconds();return e(Math.floor((a+c+f+3600)/86.4)%1E3,3)},g:function(){return a.G()%12||12},G:function(){return d.getHours()},
h:function(){return e(a.g(),2)},H:function(){return e(a.G(),2)},i:function(){return e(d.getMinutes(),2)},s:function(){return e(d.getSeconds(),2)},u:function(){return e(1E3*d.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)";},I:function(){var b=new Date(a.Y(),0),c=Date.UTC(a.Y(),0),d=new Date(a.Y(),6),e=Date.UTC(a.Y(),6);return 0+(b-c!==d-e)},O:function(){var a=d.getTimezoneOffset(),c=Math.abs(a);return(0<a?"-":"+")+e(100*Math.floor(c/
60)+c%60,4)},P:function(){var b=a.O();return b.substr(0,3)+":"+b.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-d.getTimezoneOffset()},c:function(){return"Y-m-d\\Th:i:sP".replace(g,f)},r:function(){return"D, d M Y H:i:s O".replace(g,f)},U:function(){return d/1E3|0}};this.date=function(a,c){d=null==c?new Date:c instanceof Date?new Date(c):new Date(1E3*c);return a.replace(g,f)};return this.date(i,j)}}}();
/* 10-touchSwipe.min.js */
(function(s){s.fn.swipe=function(d){if(!this)return!1;var b={fingers:1,threshold:75,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto"},p="left",t="right",u="up",v="down",w="none",x="horizontal",y="vertical",G="auto",H="start",z="move",q="end",k="cancel",e="ontouchstart"in window,I=e?"touchstart":"mousedown",A=e?"touchmove":"mousemove",B=e?"touchend":"mouseup",c="start";if(void 0==d.allowPageScroll&&(void 0!=
d.swipe||void 0!=d.swipeStatus))d.allowPageScroll=w;d&&s.extend(b,d);return this.each(function(){var g,d,n,o;function J(a){var h=e?a.touches[0]:a;c=H;e&&(i=a.touches.length);distance=0;direction=null;i==b.fingers||!e?(n=g=h.pageX,o=d=h.pageY,b.swipeStatus&&l(a,c)):m(a);r.addEventListener(A,C,!1);r.addEventListener(B,D,!1)}function C(a){if(!(c==q||c==k)){var h=e?a.touches[0]:a;g=h.pageX;d=h.pageY;direction=E();e&&(i=a.touches.length);c=z;h=direction;if(b.allowPageScroll==w)a.preventDefault();else{var f=
b.allowPageScroll==G;switch(h){case p:(b.swipeLeft&&f||!f&&b.allowPageScroll!=x)&&a.preventDefault();break;case t:(b.swipeRight&&f||!f&&b.allowPageScroll!=x)&&a.preventDefault();break;case u:(b.swipeUp&&f||!f&&b.allowPageScroll!=y)&&a.preventDefault();break;case v:(b.swipeDown&&f||!f&&b.allowPageScroll!=y)&&a.preventDefault()}}i==b.fingers||!e?(distance=F(),b.swipeStatus&&l(a,c,direction,distance),!b.triggerOnTouchEnd&&distance>=b.threshold&&(c=q,l(a,c),m(a))):(c=k,l(a,c),m(a))}}function D(a){a.preventDefault();
distance=F();direction=E();b.triggerOnTouchEnd?(c=q,(i==b.fingers||!e)&&0!=g?distance>=b.threshold||(c=k):c=k,l(a,c),m(a)):c==z&&(c=k,l(a,c),m(a));r.removeEventListener(A,C,!1);r.removeEventListener(B,D,!1)}function m(){d=g=o=n=i=0}function l(a,c){b.swipeStatus&&b.swipeStatus.call(j,a,c,direction||null,distance||0);c==k&&b.click&&((1==i||!e)&&(isNaN(distance)||0==distance))&&b.click.call(j,a,a.target);if(c==q)switch(b.swipe&&b.swipe.call(j,a,direction,distance),direction){case p:b.swipeLeft&&b.swipeLeft.call(j,
a,direction,distance);break;case t:b.swipeRight&&b.swipeRight.call(j,a,direction,distance);break;case u:b.swipeUp&&b.swipeUp.call(j,a,direction,distance);break;case v:b.swipeDown&&b.swipeDown.call(j,a,direction,distance)}}function F(){return Math.round(Math.sqrt(Math.pow(g-n,2)+Math.pow(d-o,2)))}function E(){var a;a=Math.atan2(d-o,n-g);a=Math.round(180*a/Math.PI);0>a&&(a=360-Math.abs(a));return 45>=a&&0<=a?p:360>=a&&315<=a?p:135<=a&&225>=a?t:45<a&&135>a?v:u}var r=this,j=s(this),i=0;d=g=o=n=0;try{this.addEventListener(I,
J,!1),this.addEventListener("touchcancel",m)}catch(K){}})}})(jQuery);
